<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MAMS">
<title>Non-normal endpoints • MAMS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Non-normal endpoints">
<meta property="og:description" content="MAMS">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">MAMS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../../articles/web_only/reproducibility.html">Reproducibility</a>
    <a class="dropdown-item" href="../../articles/web_only/parallelisation.html">Parallelisation</a>
    <h6 class="dropdown-header" data-toc-skip>Design studies</h6>
    <a class="dropdown-item" href="../../articles/web_only/single-stage_design.html">Single stage design</a>
    <a class="dropdown-item" href="../../articles/web_only/multi-stage_design.html">Multi-stage design</a>
    <a class="dropdown-item" href="../../articles/web_only/evaluating_properties.html">Desing operating charachteristics</a>
    <a class="dropdown-item" href="../../articles/web_only/step-down_design.html">A step-down design</a>
    <a class="dropdown-item" href="../../articles/web_only/unforeseen_design_modifications.html">Unforeseen design modifications</a>
    <a class="dropdown-item" href="../../articles/web_only/non-normal_endpoints.html">Non-normal endpoints</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>Non-normal endpoints</h1>
            
      
      
      <div class="d-none name"><code>non-normal_endpoints.Rmd</code></div>
    </div>

    
    
<p>In previuos sections we have focused on normally distributed
endpoints. Based on asymptotic theory, MAMS can also handle non-normal
endpoints by exploiting the asymptotic properties of efficient score
statistics (Jaki and Magirr 2013), as we will demonstrate for ordinal,
binary, and time-to-event outcome data.</p>
<div class="section level3">
<h3 id="ordinal-and-binary-endpoints">Ordinal and binary endpoints<a class="anchor" aria-label="anchor" href="#ordinal-and-binary-endpoints"></a>
</h3>
<p>Ordinal data consist of multiple different categories that have a
natural order, which is common for quality-of-life scores, pain scores,
and similar questionnaire-based outcomes. Our illustration here is
motivated by the ASCLEPIOS study <span class="citation">(<a href="#ref-whitehead1993">Whitehead 1993</a>)</span> and its example
analyses in <span class="citation">(<a href="#ref-whitehead2008">Whitehead and Jaki 2008</a>)</span> and <span class="citation">(<a href="#ref-jaki2012">Jaki and Magirr
2012</a>)</span>.</p>
<p>We design a <strong>MAMS</strong> trial with three experimental
treatments and a control arm, one interim analysis after half the
patients have provided an outcome measure, and triangular boundaries in
a setting with an ordinal primary endpoint, under the assumption of
proportional odds. We expect that under control conditions the
probabilities of falling into each of six categories, ordered from best
to worst, are 0.075, 0.182, 0.319, 0.243, 0.015, and 0.166. Suppose the
interesting effect is a doubling in the probability of falling into one
of the two best categories combined, from 25.7 to 51.4%, for any
experimental arm. This corresponds to an odds ratio (OR) of 3.06 and a
log-OR of 1.12. The uninteresting effect shall be one quarter of the
interesting effect on the log-OR scale, i.e., a log-OR of 0.28 or an OR
of 1.32.</p>
<p>To find the boundary values and sample sizes, we can use the function
<code>ordinal.mams</code>, which is a wrapper for <code>mams</code> with
additional inputs <code>prob</code> for the probabilities of falling
into each category (which must sum up to one), as well as
<code>or</code> and <code>or0</code> for the interesting and
uninteresting treatment effects, respectively, on the OR scale:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.075</span>, <span class="fl">0.182</span>, <span class="fl">0.319</span>, <span class="fl">0.243</span>, <span class="fl">0.015</span>, <span class="fl">0.166</span><span class="op">)</span></span>
<span><span class="va">mord</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/ordinal.mams.html">ordinal.mams</a></span><span class="op">(</span>prob <span class="op">=</span> <span class="va">prob</span>, or <span class="op">=</span> <span class="fl">3.06</span>, or0 <span class="op">=</span> <span class="fl">1.32</span>, K <span class="op">=</span> <span class="fl">3</span>, J <span class="op">=</span> <span class="fl">2</span>,</span>
<span>alpha <span class="op">=</span> <span class="fl">0.05</span>, power <span class="op">=</span> <span class="fl">0.9</span>, r <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, r0 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, ushape <span class="op">=</span> <span class="st">"triangular"</span>,</span>
<span>lshape <span class="op">=</span> <span class="st">"triangular"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mord</span></span></code></pre></div>
<pre><code><span><span class="co">## Design parameters for a 2 stage trial with 3 treatments</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                             Stage 1 Stage 2</span></span>
<span><span class="co">## Cumulative sample size per stage (control):      34      68</span></span>
<span><span class="co">## Cumulative sample size per stage (active):       34      68</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Maximum total sample size:  272 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##              Stage 1 Stage 2</span></span>
<span><span class="co">## Upper bound:   2.330   2.197</span></span>
<span><span class="co">## Lower bound:   0.777   2.197</span></span></code></pre>
<p>The function <code>ordinal.mams</code> can also be used for binary
endpoints as they are a simple special case of ordinal data where <span class="math inline">\(prob\)</span> has only two categories
(success/failure, yes/no, etc.) and the proportional odds assumption
becomes obsolete.</p>
</div>
<div class="section level3">
<h3 id="time-to-event-endpoints">Time-to-event endpoints<a class="anchor" aria-label="anchor" href="#time-to-event-endpoints"></a>
</h3>
<p>Another useful extension of <strong>MAMS</strong> is to event-time
outcomes, e.g., when the primary endpoint is survival. In that case the
effect sizes <span class="math inline">\(δ\)</span> and <span class="math inline">\(δ_0\)</span> must be specified in terms of
log-hazard ratios (log-HRs), which are assumed to be asymptotically
normal, and the standard deviation is <span class="math inline">\(σ =
1\)</span>. Sample sizes are expressed in terms of events (e.g.,
deaths), <span class="math inline">\(e\)</span>, rather than numbers of
patients, <span class="math inline">\(n\)</span>. As a consequence, we
set <span class="math inline">\(r^{(1)}_k = 1\)</span> and <span class="math inline">\(r^{(j)}_k = e^{(j)}_0 / e^{(1)}_0\)</span>. The
underlying approximation should work well if the effect size is small,
the number of allocated patients per arm is equal at each stage, and
there are few ties in relation to the number of different event
times.</p>
<p>Assume we want to design a <strong>MAMS</strong> trial with three
experimental treatment arms and a control, using triangular boundaries.
One interim analysis is to be conducted upon observing <span class="math inline">\(e^{(1)}_0\)</span> events in the control arm, set
to half of the total number of events in that arm. Our interesting
effect size is a HR of 1.5, corresponding to a log-HR of 0.405, and the
uninteresting effect size is a HR of 1.1, i.e., a log-HR of 0.095.</p>
<p>We can calculate the boundary values and sample sizes with the
function <code>tite.mams</code>, which is another wrapper for
<code><a href="../../reference/mams.html">mams()</a></code> with additional inputs <code>hr</code> and
<code>hr0</code> for the interesting and uninteresting treatment
effects, respectively, on the HR scale:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtite</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tite.mams.html">tite.mams</a></span><span class="op">(</span>hr <span class="op">=</span> <span class="fl">1.5</span>, hr0 <span class="op">=</span> <span class="fl">1.1</span>, K <span class="op">=</span> <span class="fl">3</span>, J <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span> power <span class="op">=</span> <span class="fl">0.9</span>, r <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, r0 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, ushape <span class="op">=</span> <span class="st">"triangular"</span>,</span>
<span> lshape <span class="op">=</span> <span class="st">"triangular"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mtite</span></span></code></pre></div>
<pre><code><span><span class="co">## Design parameters for a 2 stage trial with 3 treatments</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                                  Stage 1 Stage 2</span></span>
<span><span class="co">## Cumulative number of events per stage (control):      81     162</span></span>
<span><span class="co">## Cumulative number of events per stage (active):       81     162</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Maximum total number of events:  648 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##              Stage 1 Stage 2</span></span>
<span><span class="co">## Upper bound:   2.330   2.197</span></span>
<span><span class="co">## Lower bound:   0.777   2.197</span></span></code></pre>
<p>The sample size output here is given as the required number of
events, which is obviously smaller than the required number of patients.
We refer to <span class="citation">(<a href="#ref-whitehead2001">Whitehead 2001</a>)</span> for guidance how to
estimate the maximum total number of patients to be recruited.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-jaki2012" class="csl-entry">
Jaki, T., and D. Magirr. 2012. <span>“Considerations on Covariates and
Endpoints in Multi<span>-</span>Arm Multi<span>-</span>Stage Clinical
Trials Selecting All Promising<span></span>treatments.”</span>
<em>Statistics in Medicine</em> 32 (7): 1150–63. <a href="https://doi.org/10.1002/sim.5669" class="external-link">https://doi.org/10.1002/sim.5669</a>.
</div>
<div id="ref-whitehead1993" class="csl-entry">
Whitehead, John. 1993. <span>“Application of Sequential Methods to a
Phase III Clinical Trial in Stroke.”</span> <em>Drug Information
Journal</em> 27 (3): 733–40. <a href="https://doi.org/10.1177/009286159302700315" class="external-link">https://doi.org/10.1177/009286159302700315</a>.
</div>
<div id="ref-whitehead2001" class="csl-entry">
———. 2001. <span>“Predicting the Duration of Sequential Survival
Studies.”</span> <em>Drug Information Journal</em> 35 (4): 1387–1400. <a href="https://doi.org/10.1177/009286150103500435" class="external-link">https://doi.org/10.1177/009286150103500435</a>.
</div>
<div id="ref-whitehead2008" class="csl-entry">
Whitehead, John, and Thomas Jaki. 2008. <span>“One<span>-</span> and
Two<span>-</span>Stage Design Proposals for a Phase II Trial Comparing
Three Active Treatments with Control Using an Ordered Categorical
Endpoint.”</span> <em>Statistics in Medicine</em> 28 (5): 828–47. <a href="https://doi.org/10.1002/sim.3508" class="external-link">https://doi.org/10.1002/sim.3508</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Thomas Jaki, Dominique-Laurent Couturier, Dominic Magirr, Nikita Mozgunov, Philip Pallmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
