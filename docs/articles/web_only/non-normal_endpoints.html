<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Non-normal endpoints • MAMS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Non-normal endpoints">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">MAMS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><h6 class="dropdown-header" data-toc-skip>Basics</h6></li>
    <li><a class="dropdown-item" href="../../articles/web_only/reproducibility.html">Reproducibility</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/parallelisation.html">Parallelisation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Design studies</h6></li>
    <li><a class="dropdown-item" href="../../articles/web_only/single-stage_design.html">Single stage design</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/multi-stage_design.html">Multi-stage design</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/evaluating_properties.html">Design operating characteristics</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/step-down_design.html">A step-down design</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/unforeseen_design_modifications.html">Unforeseen design modifications</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/non-normal_endpoints.html">Non-normal endpoints</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Non-normal endpoints</h1>
            
      

      <div class="d-none name"><code>non-normal_endpoints.Rmd</code></div>
    </div>

    
    
<p>In previous sections we have focused on normally distributed
endpoints. Based on asymptotic theory, MAMS can also handle non-normal
endpoints by exploiting the asymptotic properties of efficient score
statistics (Jaki and Magirr 2013), as we will demonstrate for ordinal,
binary, and time-to-event outcome data.</p>
<div class="section level2">
<h2 id="ordinal-and-binary-endpoints">Ordinal and binary endpoints<a class="anchor" aria-label="anchor" href="#ordinal-and-binary-endpoints"></a>
</h2>
<p>Ordinal data consist of multiple different categories that have a
natural order, which is common for quality-of-life scores, pain scores,
and similar questionnaire-based outcomes. Our illustration here is
motivated by the ASCLEPIOS study <span class="citation">(<a href="#ref-whitehead1993">Whitehead 1993</a>)</span> and its example
analyses in <span class="citation">(<a href="#ref-whitehead2008">Whitehead and Jaki 2008</a>)</span> and <span class="citation">(<a href="#ref-jaki2012">Jaki and Magirr
2012</a>)</span>.</p>
<p>We design a <strong>MAMS</strong> trial with three experimental
treatments and a control arm, one interim analysis after half the
patients have provided an outcome measure, and triangular boundaries in
a setting with an ordinal primary endpoint, under the assumption of
proportional odds. We expect that under control conditions the
probabilities of falling into each of six categories, ordered from best
to worst, are 0.075, 0.182, 0.319, 0.243, 0.015, and 0.166. Suppose the
interesting effect is a doubling in the probability of falling into one
of the two best categories combined, from 25.7 to 51.4%, for any
experimental arm. This corresponds to an odds ratio (OR) of 3.06 and a
log-OR of 1.12. The uninteresting effect shall be one quarter of the
interesting effect on the log-OR scale, i.e., a log-OR of 0.28 or an OR
of 1.32.</p>
<p>To find the boundary values and sample sizes, we can use the function
<code>ordinal.mams</code>, which is a wrapper for <code>mams</code> with
additional inputs <code>prob</code> for the probabilities of falling
into each category (which must sum up to one), as well as
<code>or</code> and <code>or0</code> for the interesting and
uninteresting treatment effects, respectively, on the OR scale:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.075</span>, <span class="fl">0.182</span>, <span class="fl">0.319</span>, <span class="fl">0.243</span>, <span class="fl">0.015</span>, <span class="fl">0.166</span><span class="op">)</span></span>
<span><span class="va">mord</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/ordinal.mams.html">ordinal.mams</a></span><span class="op">(</span>prob <span class="op">=</span> <span class="va">prob</span>, or <span class="op">=</span> <span class="fl">3.06</span>, or0 <span class="op">=</span> <span class="fl">1.32</span>, K <span class="op">=</span> <span class="fl">3</span>, J <span class="op">=</span> <span class="fl">2</span>,</span>
<span>alpha <span class="op">=</span> <span class="fl">0.05</span>, power <span class="op">=</span> <span class="fl">0.9</span>, r <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, r0 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, ushape <span class="op">=</span> <span class="st">"triangular"</span>,</span>
<span>lshape <span class="op">=</span> <span class="st">"triangular"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mord</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Design parameters for a 2 stage trial with 3 treatments:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                             Stage 1 Stage 2</span></span>
<span><span class="co">## Cumulative sample size per stage (control):      34      68</span></span>
<span><span class="co">## Cumulative sample size per stage (active):       34      68</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Maximum total sample size:  272 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##              Stage 1 Stage 2</span></span>
<span><span class="co">## Upper bound:   2.330   2.197</span></span>
<span><span class="co">## Lower bound:   0.777   2.197</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Simulated error rates based on 50000 simulations:</span></span>
<span><span class="co">##                                                           </span></span>
<span><span class="co">## Prop. rejecting at least 1 hypothesis:               0.917</span></span>
<span><span class="co">## Prop. rejecting first hypothesis (Z_1&gt;Z_2,...,Z_K)   0.901</span></span>
<span><span class="co">## Prop. rejecting hypothesis 1:                        0.910</span></span>
<span><span class="co">## Expected sample size:                              166.796</span></span></code></pre>
<p>The function <code>ordinal.mams</code> can also be used for binary
endpoints as they are a simple special case of ordinal data where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">prob</annotation></semantics></math>
has only two categories (success/failure, yes/no, etc.) and the
proportional odds assumption becomes obsolete.</p>
</div>
<div class="section level2">
<h2 id="time-to-event-endpoints">Time-to-event endpoints<a class="anchor" aria-label="anchor" href="#time-to-event-endpoints"></a>
</h2>
<p>Another useful extension of <strong>MAMS</strong> is to event-time
outcomes, e.g., when the primary endpoint is survival. In that case the
effect sizes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">δ</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>δ</mi><mn>0</mn></msub><annotation encoding="application/x-tex">δ_0</annotation></semantics></math>
must be specified in terms of log-hazard ratios (log-HRs), which are
assumed to be asymptotically normal, and the standard deviation is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">σ = 1</annotation></semantics></math>.
Sample sizes are expressed in terms of events (e.g., deaths),
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>e</mi><annotation encoding="application/x-tex">e</annotation></semantics></math>,
rather than numbers of patients,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>.
As a consequence, we set
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>r</mi><mi>k</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msubsup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r^{(1)}_k = 1</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>r</mi><mi>k</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>j</mi><mo stretchy="true" form="postfix">)</mo></mrow></msubsup><mo>=</mo><msubsup><mi>e</mi><mn>0</mn><mrow><mo stretchy="true" form="prefix">(</mo><mi>j</mi><mo stretchy="true" form="postfix">)</mo></mrow></msubsup><mi>/</mi><msubsup><mi>e</mi><mn>0</mn><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msubsup></mrow><annotation encoding="application/x-tex">r^{(j)}_k = e^{(j)}_0 / e^{(1)}_0</annotation></semantics></math>.
The underlying approximation should work well if the effect size is
small, the number of allocated patients per arm is equal at each stage,
and there are few ties in relation to the number of different event
times.</p>
<p>Assume we want to design a <strong>MAMS</strong> trial with three
experimental treatment arms and a control, using triangular boundaries.
One interim analysis is to be conducted upon observing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>e</mi><mn>0</mn><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msubsup><annotation encoding="application/x-tex">e^{(1)}_0</annotation></semantics></math>
events in the control arm, set to half of the total number of events in
that arm. Our interesting effect size is a HR of 1.5, corresponding to a
log-HR of 0.405, and the uninteresting effect size is a HR of 1.1, i.e.,
a log-HR of 0.095.</p>
<p>We can calculate the boundary values and sample sizes with the
function <code>tite.mams</code>, which is another wrapper for
<code><a href="../../reference/MAMS.html">mams()</a></code> with additional inputs <code>hr</code> and
<code>hr0</code> for the interesting and uninteresting treatment
effects, respectively, on the HR scale:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtite</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tite.mams.html">tite.mams</a></span><span class="op">(</span>hr <span class="op">=</span> <span class="fl">1.5</span>, hr0 <span class="op">=</span> <span class="fl">1.1</span>, K <span class="op">=</span> <span class="fl">3</span>, J <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span> power <span class="op">=</span> <span class="fl">0.9</span>, r <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, r0 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, ushape <span class="op">=</span> <span class="st">"triangular"</span>,</span>
<span> lshape <span class="op">=</span> <span class="st">"triangular"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mtite</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Design parameters for a 2 stage trial with 3 treatments:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                                  Stage 1 Stage 2</span></span>
<span><span class="co">## Cumulative number of events per stage (control):      81     162</span></span>
<span><span class="co">## Cumulative number of events per stage (active):       81     162</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Maximum total number of events:  648 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##              Stage 1 Stage 2</span></span>
<span><span class="co">## Upper bound:   2.330   2.197</span></span>
<span><span class="co">## Lower bound:   0.777   2.197</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Simulated error rates based on 50000 simulations:</span></span>
<span><span class="co">##                                                           </span></span>
<span><span class="co">## Prop. rejecting at least 1 hypothesis:               0.918</span></span>
<span><span class="co">## Prop. rejecting first hypothesis (Z_1&gt;Z_2,...,Z_K)   0.904</span></span>
<span><span class="co">## Prop. rejecting hypothesis 1:                        0.912</span></span>
<span><span class="co">## Expected sample size:                              396.994</span></span></code></pre>
<p>The sample size output here is given as the required number of
events, which is obviously smaller than the required number of patients.
We refer to <span class="citation">(<a href="#ref-whitehead2001">Whitehead 2001</a>)</span> for guidance how to
estimate the maximum total number of patients to be recruited.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-jaki2012" class="csl-entry">
Jaki, T., and D. Magirr. 2012. <span>“Considerations on Covariates and
Endpoints in Multi<span>-</span>Arm Multi<span>-</span>Stage Clinical
Trials Selecting All Promising<span></span>treatments.”</span>
<em>Statistics in Medicine</em> 32 (7): 1150–63. <a href="https://doi.org/10.1002/sim.5669" class="external-link">https://doi.org/10.1002/sim.5669</a>.
</div>
<div id="ref-whitehead1993" class="csl-entry">
Whitehead, John. 1993. <span>“Application of Sequential Methods to a
Phase III Clinical Trial in Stroke.”</span> <em>Drug Information
Journal</em> 27 (3): 733–40. <a href="https://doi.org/10.1177/009286159302700315" class="external-link">https://doi.org/10.1177/009286159302700315</a>.
</div>
<div id="ref-whitehead2001" class="csl-entry">
———. 2001. <span>“Predicting the Duration of Sequential Survival
Studies.”</span> <em>Drug Information Journal</em> 35 (4): 1387–1400. <a href="https://doi.org/10.1177/009286150103500435" class="external-link">https://doi.org/10.1177/009286150103500435</a>.
</div>
<div id="ref-whitehead2008" class="csl-entry">
Whitehead, John, and Thomas Jaki. 2008. <span>“One<span>-</span> and
Two<span>-</span>Stage Design Proposals for a Phase II Trial Comparing
Three Active Treatments with Control Using an Ordered Categorical
Endpoint.”</span> <em>Statistics in Medicine</em> 28 (5): 828–47. <a href="https://doi.org/10.1002/sim.3508" class="external-link">https://doi.org/10.1002/sim.3508</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Jaki, Dominique-Laurent Couturier, Dominic Magirr, Nikita Mozgunov, Philip Pallmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
