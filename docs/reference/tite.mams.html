<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams • MAMS</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams"><meta name="description" content="The function determines (approximately) the boundaries of a
multi-arm multi-stage study with time-to-event endpoints for a given boundary
shape and finds the required number of events."><meta property="og:description" content="The function determines (approximately) the boundaries of a
multi-arm multi-stage study with time-to-event endpoints for a given boundary
shape and finds the required number of events."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MAMS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><h6 class="dropdown-header" data-toc-skip>Basics</h6></li>
    <li><a class="dropdown-item" href="../articles/web_only/reproducibility.html">Reproducibility</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/parallelisation.html">Parallelisation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Design studies</h6></li>
    <li><a class="dropdown-item" href="../articles/web_only/single-stage_design.html">Single stage design</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/multi-stage_design.html">Multi-stage design</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/evaluating_properties.html">Desing operating charachteristics</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/step-down_design.html">A step-down design</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/unforeseen_design_modifications.html">Unforeseen design modifications</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/non-normal_endpoints.html">Non-normal endpoints</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Function to design multi-arm multi-stage studies with time-to-event endpoints</h1>

      <div class="d-none name"><code>tite.mams.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function determines (approximately) the boundaries of a
multi-arm multi-stage study with time-to-event endpoints for a given boundary
shape and finds the required number of events.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tite.mams</span><span class="op">(</span></span>
<span>  hr <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  hr0 <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  K <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  J <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  power <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  r0 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  ushape <span class="op">=</span> <span class="st">"obf"</span>,</span>
<span>  lshape <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>  ufix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lfix <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  nstart <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nstop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample.size <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  Q <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-hr">hr<a class="anchor" aria-label="anchor" href="#arg-hr"></a></dt>
<dd><p>Interesting treatment effect on the scale of hazard ratios
(default=2).</p></dd>


<dt id="arg-hr-">hr0<a class="anchor" aria-label="anchor" href="#arg-hr-"></a></dt>
<dd><p>Uninteresting treatment effect on the scale of hazard ratios
(default=1.2).</p></dd>


<dt id="arg-k">K<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>Number of experimental treatments (default=4).</p></dd>


<dt id="arg-j">J<a class="anchor" aria-label="anchor" href="#arg-j"></a></dt>
<dd><p>Number of stages (default=2).</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>One-sided familywise error rate (default=0.05).</p></dd>


<dt id="arg-power">power<a class="anchor" aria-label="anchor" href="#arg-power"></a></dt>
<dd><p>Desired power (default=0.9).</p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>Vector of allocation ratios (default=1:2).</p></dd>


<dt id="arg-r-">r0<a class="anchor" aria-label="anchor" href="#arg-r-"></a></dt>
<dd><p>Vector ratio on control (default=1:2).</p></dd>


<dt id="arg-ushape">ushape<a class="anchor" aria-label="anchor" href="#arg-ushape"></a></dt>
<dd><p>Shape of upper boundary. Either a function specifying the shape
or one of "pocock", "obf" (the default), "triangular" and "fixed".</p></dd>


<dt id="arg-lshape">lshape<a class="anchor" aria-label="anchor" href="#arg-lshape"></a></dt>
<dd><p>Shape of lower boundary. Either a function specifying the shape
or one of "pocock", "obf", "triangular" and "fixed" (the default).</p></dd>


<dt id="arg-ufix">ufix<a class="anchor" aria-label="anchor" href="#arg-ufix"></a></dt>
<dd><p>Fixed upper boundary (default=NULL). Only used if shape="fixed".</p></dd>


<dt id="arg-lfix">lfix<a class="anchor" aria-label="anchor" href="#arg-lfix"></a></dt>
<dd><p>Fixed lower boundary (default=0). Only used if shape="fixed".</p></dd>


<dt id="arg-nstart">nstart<a class="anchor" aria-label="anchor" href="#arg-nstart"></a></dt>
<dd><p>Starting point for finding the sample size (default=1).</p></dd>


<dt id="arg-nstop">nstop<a class="anchor" aria-label="anchor" href="#arg-nstop"></a></dt>
<dd><p>Stopping point for finding the sample size (default=NULL).</p></dd>


<dt id="arg-sample-size">sample.size<a class="anchor" aria-label="anchor" href="#arg-sample-size"></a></dt>
<dd><p>Logical if sample size should be found as well
(default=TRUE).</p></dd>


<dt id="arg-q">Q<a class="anchor" aria-label="anchor" href="#arg-q"></a></dt>
<dd><p>Number of quadrature points per dimension in the outer integral
(default=20).</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>if TRUE (default), allows parallelisation of the computation
via a user-defined strategy specified by means of the function
future::plan(). If not set differently, the default strategy is sequential,
which corresponds to a computation without parallelisation.</p></dd>


<dt id="arg-print">print<a class="anchor" aria-label="anchor" href="#arg-print"></a></dt>
<dd><p>if TRUE (default), indicate at which stage the computation is.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of the class MAMS containing the following components:</p>
<dl><dt>l</dt>
<dd><p>Lower boundary.</p></dd>

<dt>u</dt>
<dd><p>Upper boundary.</p></dd>

<dt>n</dt>
<dd><p>Sample size on control in stage 1.</p></dd>

<dt>N</dt>
<dd><p>Maximum total sample size.</p></dd>

<dt>K</dt>
<dd><p>Number of experimental treatments.</p></dd>

<dt>J</dt>
<dd><p>Number of stages in the trial.</p></dd>

<dt>alpha</dt>
<dd><p>Familywise error rate.</p></dd>

<dt>alpha.star</dt>
<dd><p>Cumulative familywise error rate spent by each analysis.</p></dd>

<dt>power</dt>
<dd><p>Power under least favorable configuration.</p></dd>

<dt>rMat</dt>
<dd><p>Matrix of allocation ratios. First row corresponds to control
while subsequent rows are for the experimental treatments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function finds the (approximate) boundaries and sample size of
a multi-arm multi-stage study with time-to-event endpoints with K active
treatments plus control in which all promising treatments are continued at
interim analyses as described in Magirr et al (2012). It is a wrapper around
the basic mams function to facilitate its use with time-to-event endpoints,
following ideas of Jaki &amp; Magirr (2013). Note that the sample size is
calculated as the required number of events, from which the total sample
size can be estimated (e.g., Whitehead 2001). See ?mams for further details
on the basic methodology.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Philip Pallmann, Dominic Magirr</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">## An example 2-stage design with triangular efficacy and futility boundaries</span></span></span>
<span class="r-in"><span><span class="fu">tite.mams</span><span class="op">(</span>hr<span class="op">=</span><span class="fl">2</span>, hr0<span class="op">=</span><span class="fl">1.5</span>, K<span class="op">=</span><span class="fl">3</span>, J<span class="op">=</span><span class="fl">2</span>, alpha<span class="op">=</span><span class="fl">0.05</span>, power<span class="op">=</span><span class="fl">0.9</span>,</span></span>
<span class="r-in"><span>          r<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, r0<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, ushape<span class="op">=</span><span class="st">"triangular"</span>, lshape<span class="op">=</span><span class="st">"triangular"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    i) find lower and upper boundaries</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>       </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   ii) define alpha star</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  iii) perform sample size calculation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>       (maximum iteration number = 213)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>       </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 50</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>       </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   iv) run simulation </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Design parameters for a 2 stage trial with 3 treatments:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                  Stage 1 Stage 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cumulative number of events per stage (control):      56     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cumulative number of events per stage (active):       56     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maximum total number of events:  448 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Stage 1 Stage 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper bound:   2.330   2.197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower bound:   0.777   2.197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simulated error rates based on 50000 simulations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prop. rejecting at least 1 hypothesis:               0.998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prop. rejecting first hypothesis (Z_1&gt;Z_2,...,Z_K)   0.902</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prop. rejecting hypothesis 1:                        0.979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Expected sample size:                              237.363</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Jaki, Dominique-Laurent Couturier, Dominic Magirr, Nikita Mozgunov, Philip Pallmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

