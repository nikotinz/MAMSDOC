[{"path":"/articles/web_only/multi-stage_design.html","id":"introduction","dir":"Articles > Web_only","previous_headings":"","what":"Introduction","title":"Multi-stage designs","text":"consider TAILoR study motivating example now 1 stage (J>1).  Since single stage used initial example, form boundaries specified. multi-stage designs shape lower upper boundary can defined via arguments lshape ushape. arguments can either invoke pre-defined shapes following (POCOCK 1977), (O’Brien Fleming 1979) triangular test (Whitehead 1997) using options \"pocock\", \"obf\", \"triangular\", respectively. Alternatively constant value (option \"fixed\") can specified. Finally, custom boundaries can defined function requires exactly one argument number stages returns vector length. lower boundary shape must non-decreasing upper boundary shape must non-increasing ensure reasonable trial designs found.","code":""},{"path":"/articles/web_only/multi-stage_design.html","id":"triangular-boundaries","dir":"Articles > Web_only","previous_headings":"","what":"Triangular boundaries","title":"Multi-stage designs","text":"following example calculate two-stage design investigating three experimental treatments. Triangular boundaries used cumulative sample size ratio r=1:2 first second stage, .e., interim analysis scheduled half maximum number patients recruited outcome observed, twice many subjects control experimental arms, specified r0 = c(2, 4). cumulative sample sizes stages 1 2 given tabular form R output. trial may stopped first analysis, either futility (\\(Z\\) statistics less 0.786) superiority (least one \\(Z\\) statistic exceeds 2.359). cases trial taken second stage additional patients randomized experimental treatment whose \\(Z\\) statistic falls boundary values first stage control. critical value 2.225 used second analysis decide whether treatment shall deemed superior control .","code":"m2 <- mams(K = 3, J = 2, p = 0.65, p0 = 0.55, r = 1:2, r0 = c(2, 4), alpha = 0.05,             power = 0.9, ushape = \"triangular\", lshape = \"triangular\") m2 ## Design parameters for a 2 stage trial with 3 treatments ##  ##                                             Stage 1 Stage 2 ## Cumulative sample size per stage (control):      76     152 ## Cumulative sample size per stage (active):       38      76 ##  ## Maximum total sample size:  380  ##  ##              Stage 1 Stage 2 ## Upper bound:   2.359   2.225 ## Lower bound:   0.786   2.225"},{"path":"/articles/web_only/multi-stage_design.html","id":"user-defined-function-boundaries","dir":"Articles > Web_only","previous_headings":"","what":"User defined function boundaries","title":"Multi-stage designs","text":"next example involves three treatment arms three-stage design equal numbers subjects added every stage well balance sample size control treatment groups; requires us specify cumulative sample sizes r=1:3 r0=1:3. illustrate versatility function mams, use pre-defined boundary shapes. Instead implement fixed lower bound zero (lshape = \"fixed\" lfix = 0) upper boundary first-stage critical value three times large final critical value. achieve , ushape specified function returns vector (3, 2, 1) (return(x:1)). maximum total sample size considerably lower design m2 (324 versus 380), critical value final stage (2.042 versus 2.225). feigned advantages come, however, cost large upper boundary values stages 1 2 (6.125 4.084) make extremely hard stop trial early, unlikely useful design practice. related note, design allow stopping one efficacy futility , can achieve setting lfix = -Inf ufix = Inf, respectively.","code":"m3 <- mams(K = 3, J = 3, p = 0.65, p0 = 0.55, alpha = 0.05, power = 0.9, r = 1:3,             r0 = 1:3, ushape = function(x) return(x:1), lshape = \"fixed\", lfix = 0) m3 ## Design parameters for a 3 stage trial with 3 treatments ##  ##                                             Stage 1 Stage 2 Stage 3 ## Cumulative sample size per stage (control):      27      54      81 ## Cumulative sample size per stage (active):       27      54      81 ##  ## Maximum total sample size:  324  ##  ##              Stage 1 Stage 2 Stage 3 ## Upper bound:   6.124   4.083   2.041 ## Lower bound:   0.000   0.000   2.041"},{"path":"/articles/web_only/multi-stage_design.html","id":"compare-pocock-obrien-fleming-and-triangular-boundaries","dir":"Articles > Web_only","previous_headings":"","what":"Compare Pocock, O’Brien-Fleming and triangular boundaries","title":"Multi-stage designs","text":"compare boundaries “” design m3 corresponding standard designs (Pocock, O’Brien-Fleming, triangular) graphically using plot function comes MAMS package. First compute boundaries standard designs J = 3 stages sample size allocations m3. Notice computation designs 2 stages can take several minutes. plot boundaries identical scaling vertical axes (using argument ylim) make graphs visually comparable:  Figure displays shapes four designs. see triangular design clearly narrowest boundaries (therefore highest chances stopping trial early) whereas self-designed variant leads extraordinarily high upper boundary values first two interim analyses.","code":"poc <- mams(K = 3, J = 3, p = 0.65, p0 = 0.55, r = 1:3, r0 = 1:3, alpha = 0.05,              power = 0.9, ushape = \"pocock\", lshape = \"pocock\") obf <- mams(K = 3, J = 3, p = 0.65, p0 = 0.55, r = 1:3, r0 = 1:3, alpha = 0.05,              power = 0.9, ushape = \"obf\", lshape = \"obf\") tri <- mams(K = 3, J = 3, p = 0.65, p0 = 0.55, r = 1:3, r0 = 1:3, alpha = 0.05,              power = 0.9, ushape = \"triangular\", lshape = \"triangular\") par(mfrow = c(2, 2)) plot(poc, ylim = c(-5, 7), main = \"Pocock\") plot(obf, ylim = c(-5, 7), main = \"O'Brien-Fleming\") plot(tri, ylim = c(-5, 7), main = \"Triangular\") plot(m3, ylim = c(-5, 7), main = \"Self-designed\")"},{"path":[]},{"path":"/articles/web_only/non-normal_endpoints.html","id":"ordinal-and-binary-endpoints","dir":"Articles > Web_only","previous_headings":"","what":"Ordinal and binary endpoints","title":"Non-normal endpoints","text":"Ordinal data consist multiple different categories natural order, common quality--life scores, pain scores, similar questionnaire-based outcomes. illustration motivated ASCLEPIOS study (Whitehead 1993) example analyses (Whitehead Jaki 2008) (Jaki Magirr 2012). design MAMS trial three experimental treatments control arm, one interim analysis half patients provided outcome measure, triangular boundaries setting ordinal primary endpoint, assumption proportional odds. expect control conditions probabilities falling six categories, ordered best worst, 0.075, 0.182, 0.319, 0.243, 0.015, 0.166. Suppose interesting effect doubling probability falling one two best categories combined, 25.7 51.4%, experimental arm. corresponds odds ratio () 3.06 log-1.12. uninteresting effect shall one quarter interesting effect log-scale, .e., log-0.28 1.32. find boundary values sample sizes, can use function ordinal.mams, wrapper mams additional inputs prob probabilities falling category (must sum one), well or0 interesting uninteresting treatment effects, respectively, scale: function ordinal.mams can also used binary endpoints simple special case ordinal data \\(prob\\) two categories (success/failure, yes/, etc.) proportional odds assumption becomes obsolete.","code":"prob <- c(0.075, 0.182, 0.319, 0.243, 0.015, 0.166) mord <- ordinal.mams(prob = prob, or = 3.06, or0 = 1.32, K = 3, J = 2, alpha = 0.05, power = 0.9, r = 1:2, r0 = 1:2, ushape = \"triangular\", lshape = \"triangular\")  mord ## Design parameters for a 2 stage trial with 3 treatments ##  ##                                             Stage 1 Stage 2 ## Cumulative sample size per stage (control):      34      68 ## Cumulative sample size per stage (active):       34      68 ##  ## Maximum total sample size:  272  ##  ##              Stage 1 Stage 2 ## Upper bound:   2.330   2.197 ## Lower bound:   0.777   2.197"},{"path":"/articles/web_only/non-normal_endpoints.html","id":"time-to-event-endpoints","dir":"Articles > Web_only","previous_headings":"","what":"Time-to-event endpoints","title":"Non-normal endpoints","text":"Another useful extension MAMS event-time outcomes, e.g., primary endpoint survival. case effect sizes \\(δ\\) \\(δ_0\\) must specified terms log-hazard ratios (log-HRs), assumed asymptotically normal, standard deviation \\(σ = 1\\). Sample sizes expressed terms events (e.g., deaths), \\(e\\), rather numbers patients, \\(n\\). consequence, set \\(r^{(1)}_k = 1\\) \\(r^{(j)}_k = e^{(j)}_0 / e^{(1)}_0\\). underlying approximation work well effect size small, number allocated patients per arm equal stage, ties relation number different event times. Assume want design MAMS trial three experimental treatment arms control, using triangular boundaries. One interim analysis conducted upon observing \\(e^{(1)}_0\\) events control arm, set half total number events arm. interesting effect size HR 1.5, corresponding log-HR 0.405, uninteresting effect size HR 1.1, .e., log-HR 0.095. can calculate boundary values sample sizes function tite.mams, another wrapper mams() additional inputs hr hr0 interesting uninteresting treatment effects, respectively, HR scale: sample size output given required number events, obviously smaller required number patients. refer (Whitehead 2001) guidance estimate maximum total number patients recruited.","code":"mtite <- tite.mams(hr = 1.5, hr0 = 1.1, K = 3, J = 2, alpha = 0.05,  power = 0.9, r = 1:2, r0 = 1:2, ushape = \"triangular\",  lshape = \"triangular\")  mtite ## Design parameters for a 2 stage trial with 3 treatments ##  ##                                                  Stage 1 Stage 2 ## Cumulative number of events per stage (control):      81     162 ## Cumulative number of events per stage (active):       81     162 ##  ## Maximum total number of events:  648  ##  ##              Stage 1 Stage 2 ## Upper bound:   2.330   2.197 ## Lower bound:   0.777   2.197"},{"path":[]},{"path":"/articles/web_only/parallelisation.html","id":"parallelisation","dir":"Articles > Web_only","previous_headings":"","what":"Parallelisation","title":"Parallelisation","text":"sequential, default strategy corresponding computation without parallelisation; multicore, using separate forked R processes, available unix/osx users; multisession, using separate R sessions, available users. cluster, using separate R sessions one machines refer (Bengtsson 2021) overview future framework. performance plan varies depending operating system computer specifications. personal computers, experience suggests cluster optimal windows machines, multicore optimal linux machines, multisession optimal OSX machines. Note , functions MAMS available workers defined future::plan(), MAMS installed location available .libPaths (default, R installs packages directory corresponding first element .libPaths).","code":""},{"path":[]},{"path":"/articles/web_only/reproducibility.html","id":"sequential-computation","dir":"Articles > Web_only","previous_headings":"","what":"Sequential computation","title":"Reproducibility","text":"","code":"set.seed(2910) m_seq <- mams(K = 3, J = 3, p = 0.65, p0 = 0.55, r = 1:3, r0 = 1:3, alpha = 0.05,                power = 0.9, parallel = FALSE) m_seq ## Design parameters for a 3 stage trial with 3 treatments ##  ##                                             Stage 1 Stage 2 Stage 3 ## Cumulative sample size per stage (control):      29      58      87 ## Cumulative sample size per stage (active):       29      58      87 ##  ## Maximum total sample size:  348  ##  ##              Stage 1 Stage 2 Stage 3 ## Upper bound:   3.611   2.554   2.085 ## Lower bound:   0.000   0.000   2.085"},{"path":"/articles/web_only/reproducibility.html","id":"parallel-computation","dir":"Articles > Web_only","previous_headings":"","what":"Parallel computation","title":"Reproducibility","text":"results sequential parallel computation case slightly differ upper bound Stage 1.","code":"set.seed(2910) m_par <- mams(K = 3, J = 3, p = 0.65, p0 = 0.55, r = 1:3, r0 = 1:3, alpha = 0.05,                power = 0.9, parallel = TRUE) m_par ## Design parameters for a 3 stage trial with 3 treatments ##  ##                                             Stage 1 Stage 2 Stage 3 ## Cumulative sample size per stage (control):      29      58      87 ## Cumulative sample size per stage (active):       29      58      87 ##  ## Maximum total sample size:  348  ##  ##              Stage 1 Stage 2 Stage 3 ## Upper bound:   3.612   2.554   2.085 ## Lower bound:   0.000   0.000   2.085"},{"path":"/articles/web_only/single-stage_design.html","id":"tailor-study","dir":"Articles > Web_only","previous_headings":"","what":"TAILoR Study","title":"Single-stage design","text":"TAILoR study (Pushpakom et al. 2015) serves motivating example, consider design evaluates three different experimental treatment arms control, using one-sided type error rate 5% 90% power. interesting effect size set \\(\\mathrm{p} = 0.65\\), corresponds effect \\(δ = 0.545σ\\) traditional scale. uninteresting treatment effect chosen \\(\\mathrm{p}_0 = 0.55\\) (\\(δ_0 = 0.178σ\\)). MAMS allows user choose whichever parameterization prefer specifying effect sizes.","code":""},{"path":"/articles/web_only/single-stage_design.html","id":"mams-function","dir":"Articles > Web_only","previous_headings":"","what":"mams() function","title":"Single-stage design","text":"Designing studies including finding boundaries design required sample size can achieved function mams. parameters function correspond definition Section 2 (Jaki, Pallmann, Magirr 2019) K, e.g., specifies number experimental treatments compared control, J number stages. begin considering single-stage design (J = 1), corresponds design based standard Dunnett test (Dunnett 1955) involving K = 3 experimental treatments. use equal allocation treatment arms, specified via r=1 experimental arms r0=1 control. library(MAMS) set.seed(2910) m1 <- mams(K = 3, J = 1, p = 0.65, p0 = 0.55, r = 1, r0 = 1, alpha = 0.05, power = 0.9) overview design displayed print(m1) summary(m1) simply m1. m1 output produced specifies number patients required control treatment arm well boundaries design. total 316 patients, 79 control 79 3 experimental treatments, required study. null hypothesis treatment k can rejected corresponding test statistic larger 2.062. design can also specified scale traditional effect sizes rather probabilities, setting p p0 NULL specifying values delta, delta0, sd. output exactly m1. m1d <- mams(K = 3, J = 1, p = NULL, p0 = NULL, delta = 0.545, delta0 = 0.178, sd = 1, r = 1, r0 = 1, alpha = 0.05, power = 0.9) m1d remainder section specify effect sizes probability scale, converting straightforward R: pnorm(0.545 / sqrt(2)) qnorm(0.65) * sqrt(2)","code":""},{"path":[]},{"path":[]},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Thomas Jaki. Author, maintainer. Dominique-Laurent Couturier. Author. Dominic Magirr. Author. Nikita Mozgunov. Author. Philip Pallmann. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Jaki T, Pallmann P, Magirr D (2019). “R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials.” Journal Statistical Software, 88(4), 1–25. doi:10.18637/jss.v088.i04.","code":"@Article{,   title = {The {R} Package {MAMS} for Designing Multi-Arm Multi-Stage Clinical Trials},   author = {Thomas Jaki and Philip Pallmann and Dominic Magirr},   journal = {Journal of Statistical Software},   year = {2019},   volume = {88},   number = {4},   pages = {1--25},   doi = {10.18637/jss.v088.i04}, }"},{"path":"/index.html","id":"mams-","dir":"","previous_headings":"","what":"Designing multi-arm multi stage studies","title":"Designing Multi-Arm Multi-Stage Studies","text":"package allows design multi-arm multi-stage (MAMS) studies asymptotically normal endpoints known variance. considers normal, binary, ordinal time--event endpoints either single best treatment promising treatments continued interim analyses.","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Designing Multi-Arm Multi-Stage Studies","text":"can install latest released version CRAN within R:","code":"install.packages(\"MAMS\")"},{"path":"/index.html","id":"details","dir":"","previous_headings":"","what":"Details","title":"Designing Multi-Arm Multi-Stage Studies","text":"Currently implemented functions : mams(): function allowing design multi-arm multi-stage studies normal endpoints, new.bounds(): function allowing update lower upper boundaries multi-arm multi-stage study, typically initally defined mams(), based observed sample sizes, mams.sim(): function allowing simulate multi-arm multi-stage studies given chosen boundaries sample size, estimates power expected sample size, stepdown.mams(): function allowing find stopping boundaries 2- 3-stage (stepdown) multiple-comparisons--control test, stepdown.update(): function allowing update stopping boundaries multi-arm multi-stage study, typically initally defined stepdown.mams(), interim analysis well allowing unplanned treatment selection /sample-size reassessment, ordinal.mams(): function allowing design multi-arm multi-stage studies ordinal binary endpoints, tite.mams(): function allowing design multi-arm multi-stage studies time--event endpoints. refer Jaki et al (2019) overview package well Magirr et al (2012) Magirr et al (2014) theoretical details.","code":""},{"path":"/reference/generic.html","id":null,"dir":"Reference","previous_headings":"","what":"Different generic functions for class MAMS. — plot","title":"Different generic functions for class MAMS. — plot","text":"Generic functions summarizing object class MAMS.","code":""},{"path":"/reference/generic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Different generic functions for class MAMS. — plot","text":"","code":"# S3 method for MAMS print(x, digits=max(3, getOption(\"digits\") - 4), ...)  # S3 method for MAMS summary(object, digits=max(3, getOption(\"digits\") - 4), ...)  # S3 method for MAMS plot(x, col=NULL, pch=NULL, lty=NULL, main=NULL, xlab=\"Analysis\",       ylab=\"Test statistic\", ylim=NULL, type=NULL, las=1, ...)  # S3 method for MAMS.sim print(x, digits=max(3, getOption(\"digits\") - 4), ...)  # S3 method for MAMS.sim summary(object, digits=max(3, getOption(\"digits\") - 4), ...)  # S3 method for MAMS.stepdown print(x, digits=max(3, getOption(\"digits\") - 4), ...)  # S3 method for MAMS.stepdown summary(object, digits=max(3, getOption(\"digits\") - 4), ...)  # S3 method for MAMS.stepdown plot(x, col=NULL, pch=NULL, lty=NULL, main=NULL, xlab=\"Analysis\",       ylab=\"Test statistic\", ylim=NULL, type=NULL, bty=\"n\", las=1, ...)"},{"path":"/reference/generic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Different generic functions for class MAMS. — plot","text":"x output object class MAMS. digits Number significant digits printed. object output object class MAMS. col specification default plotting color (default=NULL). See par details. pch Either integer specifying symbol single character used default plotting points (default=NULL). See par details. lty specification default line type used analyses (default=NULL). Setting zero supresses ploting lines. See par details. main overall title plot (default=NULL). xlab title x axis (default=\"Analysis\"). ylab title y axis (default=\"Test statistic\"). ylim Numeric vector length 2, giving y coordinates range (default=NULL). type Type plot used (default=NULL). See plot details. bty box drawn around legend? default \"n\" draw box, alternative option \"o\" . las specification axis labeling style. default 1 ensures labels always horizontal. See ?par details. ... (graphical) arguments passed methods.","code":""},{"path":"/reference/generic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Different generic functions for class MAMS. — plot","text":"print.MAMS produces summary object class MAMS including boundaries requires sample size initially requested. summary.MAMS produces output print.MAMS. plot.MAMS produces plot boundaries. print.MAMS.sim produces summary object class MAMS.sim including type--error expected sample size. summary.MAMS.sim produces output print.MAMS.sim. print.MAMS.stepdown produces summary object class MAMS including boundaries requires sample size initially requested. summary.MAMS.stepdown produces output print.stepdown.mams. plot.MAMS.stepdown produces plot boundaries. used stepdown.update, pluses indicate observed values test statistics.","code":""},{"path":"/reference/generic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Different generic functions for class MAMS. — plot","text":"Screen graphics output.","code":""},{"path":[]},{"path":"/reference/generic.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Different generic functions for class MAMS. — plot","text":"Magirr D, Jaki T, Whitehead J (2012) generalized Dunnett test multi-arm multi-stage clinical studies treatment selection. Biometrika, 99(2), 494-501. Stallard N, Todd S (2003) Sequential designs phase III clinical trials incorporating treatment selection. Statistics Medicine, 22(5), 689-703. Magirr D, Stallard N, Jaki T (2014) Flexible sequential designs multi-arm clinical trials. Statistics Medicine, 33(19), 3269-3279.","code":""},{"path":"/reference/generic.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Different generic functions for class MAMS. — plot","text":"Thomas Jaki, Dominic Magirr, Philip Pallmann","code":""},{"path":"/reference/generic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Different generic functions for class MAMS. — plot","text":"","code":"# \\donttest{ # 2-stage design with triangular boundaries res <- mams(K=4, J=2, alpha=0.05, power=0.9, r=1:2, r0=1:2, p=0.65, p0=0.55,              ushape=\"triangular\", lshape=\"triangular\", nstart=30) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 259) #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> 50 #>        #>   print(res) #> Design parameters for a 2 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 #> Cumulative sample size per stage (control):      50     100 #> Cumulative sample size per stage (active):       50     100 #>  #> Maximum total sample size:  500  #>  #>              Stage 1 Stage 2 #> Upper bound:   2.432   2.293 #> Lower bound:   0.811   2.293 summary(res) #> Design parameters for a 2 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 #> Cumulative sample size per stage (control):      50     100 #> Cumulative sample size per stage (active):       50     100 #>  #> Maximum total sample size:  500  #>  #>              Stage 1 Stage 2 #> Upper bound:   2.432   2.293 #> Lower bound:   0.811   2.293 plot(res)   res <- mams.sim(nsim=10000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),                 l=c(0.000, 2.169), pv=c(0.65, 0.55, 0.55, 0.55), ptest=c(1:2, 4))  print(res) #> Simulated error rates based on 10000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.930 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.908 #> Prop. rejecting hypotheses 1 or 2 or 4:              0.928 #> Expected sample size:                              346.892  # 2-stage 3-treatments versus control design, all promising treatments are selected: res <- stepdown.mams(nMat=matrix(c(10, 20), nrow=2, ncol=4),                       alpha.star=c(0.01, 0.05), lb=0,                       selection=\"all.promising\")  print(res) #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                     10      20 #> Cumulative sample size per stage (treatment  1 ):      10      20 #> Cumulative sample size per stage (treatment  2 ):      10      20 #> Cumulative sample size per stage (treatment  3 ):      10      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.69    2.10 #> Lower boundary       0.00    2.10 summary(res) #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                     10      20 #> Cumulative sample size per stage (treatment  1 ):      10      20 #> Cumulative sample size per stage (treatment  2 ):      10      20 #> Cumulative sample size per stage (treatment  3 ):      10      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.69    2.10 #> Lower boundary       0.00    2.10 plot(res)  # }"},{"path":"/reference/MAMS-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Designing Multi-Arm Multi-Stage Studies — MAMS","title":"Designing Multi-Arm Multi-Stage Studies — MAMS","text":"package allows design multi-arm multi-stage (MAMS) studies asymptotically normal endpoints known variance. considers normal, binary, ordinal time--event endpoints  either single best treatment promising treatments  continued interim analyses.","code":""},{"path":"/reference/MAMS-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Designing Multi-Arm Multi-Stage Studies — MAMS","text":"Currently implemented functions : mams(): function allowing design multi-arm multi-stage studies normal endpoints, new.bounds(): function allowing update lower upper boundaries multi-arm multi-stage study, typically initally defined mams(), based observed sample sizes, mams.sim(): function allowing simulate multi-arm multi-stage studies given chosen boundaries sample size, estimates power expected sample size, stepdown.mams(): function allowing find stopping boundaries 2- 3-stage (step-) multiple-comparisons--control test, stepdown.update(): function allowing update stopping boundaries multi-arm multi-stage study, typically initally defined stepdown.mams(), interim analysis well allowing unplanned treatment selection /sample-size reassessment, ordinal.mams(): function allowing design multi-arm multi-stage studies ordinal binary endpoints, tite.mams(): function allowing design multi-arm multi-stage studies time--event endpoints. refer Jaki et al (2019) overview package well Magirr et al (2012) Magirr et al (2014) theoretical details. Parallelisation Since version 2.0.0, MAMS relies package future.apply parallel computation. package future.apply part future parallelisation framework requires users define parallelisation strategy means function future::plan(). function takes several options like, example, sequential (default strategy corresponding computation without parallelisation), multicore (using separate forked R processes, available unix/osx users) multisession (using separate R sessions, available users). refer Bengtsson H. (2022) overview future framework. Note , functions MAMS available workers defined future::plan(), MAMS installed location available .libPaths (default, R installs packages directory corresponding first element .libPaths). Reproducibility Results MAMS package studies involving 2 stages seed-dependent (Gaussian quadrature integration multivariate normal distribution relies probabilities estimated means randomised Quasi-Monte-Carlo procedure Genz Bretz mvtnorm::pmvnorm()). Results reproducible seed set evaluation function MAMS package (typically means function set.seed). parallel=TRUE, future package assigns independent streams L'Ecuyer pseudo-random numbers parallelised task, allowing results reproducible seed set, even using different parallelisation strategy /different number workers. parallel=FALSE, random number generation handled base R directly instead future package, , number stages larger 2, evaluations using seed lead exact results parallel=FALSE parallel=TRUE.","code":""},{"path":"/reference/MAMS-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Designing Multi-Arm Multi-Stage Studies — MAMS","text":"Thomas Jaki, Dominique-Laurent Couturier, Dominic Magirr Philip Pallmann Maintainer: Thomas Jaki thomas.jaki@pm..","code":""},{"path":"/reference/MAMS-package.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Designing Multi-Arm Multi-Stage Studies — MAMS","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Magirr D., Stallard N. Jaki T. (2014), Flexible sequential designs multi-arm clinical trials, Statistics Medicine, 33(19), 3269-3279. Link: doi:10.1002/sim.6183 Bengtsson H. (2022), Unifying Framework Parallel Distributed Processing R using Futures, appear R Journal. Link: accepted version","code":""},{"path":"/reference/mams.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to design multi-arm multi-stage studies with normal endpoints — mams","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"function determines boundaries multi-arm multi-stage study given boundary shape finds required number subjects.","code":""},{"path":"/reference/mams.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"","code":"mams(K=4, J=2, alpha=0.05, power=0.9, r=1:2, r0=1:2, p=0.75, p0=0.5,       delta=NULL, delta0=NULL, sd=NULL, ushape=\"obf\", lshape=\"fixed\",      ufix=NULL, lfix=0, nstart=1, nstop=NULL, sample.size=TRUE, N=20,      type=\"normal\", parallel=TRUE, print=TRUE)"},{"path":"/reference/mams.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"K Number experimental treatments (default=4). J Number stages (default=2). alpha One-sided familywise error rate (default=0.05). power Desired power (default=0.9). r Vector allocation ratios (default=1:2). r0 Vector ratio control (default=1:2). p Interesting treatment effect probability scale. See Details (default=0.75). p0 Uninteresting treatment effect probability scale. See Details (default=0.5). delta Interesting treatment effect traditional scale. See Details (default=NULL). delta0 Uninteresting treatment effect traditional scale. See Details (default=NULL). sd Standard deviation, assumed known. See Details (default=NULL). ushape Shape upper boundary. Either function specifying shape one \"pocock\", \"obf\" (default), \"triangular\" \"fixed\". See details. lshape Shape lower boundary. Either function specifying shape one \"pocock\", \"obf\", \"triangular\" \"fixed\" (default). See details. ufix Fixed upper boundary (default=NULL). used shape=\"fixed\". lfix Fixed lower boundary (default=0). used shape=\"fixed\". nstart Starting point finding sample size (default=1). nstop Stopping point finding sample size (default=NULL). sample.size Logical sample size found well (default=TRUE). N Number quadrature points per dimension outer integral (default=20). type changed automatically wrappers tite.mams() (\"tite\") ordinal.mams() (\"ordinal\") customise output. parallel TRUE (default), allows parallelisation computation via user-defined strategy specified means function future::plan(). set differently, default strategy sequential, corresponds computation without parallelisation. print TRUE (default), indicate stage computation .","code":""},{"path":"/reference/mams.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"function finds boundaries sample size multi-arm multi-stage study K active treatments plus control promising treatments continued interim analyses described Magirr et al (2012). interim analysis test statistics compared lower (futility) bound treatment whose corresponding test statistic falls bound discontinued. Similarly test statistic exceeds upper (efficacy) bound null hypothesis corresponding treatment can rejected superiority treatment control claimed. time study stopped. least one test statistic exceeds lower bound none exceeds upper bound study continued patients recruited remaining experimental treatments plus control. design found least favorable configuration, requires interesting treatment effect p present like find high probability uninteresting effect p0. p p0 parameterized \\(P(X_k > X_0 ) = p\\), probability randomly selected person treatment k observing better outcome random person control. p=0.5 experimental treatment control perform equally well. advantage paramterization knowledge variance required. convert traditional effect sizes, \\(\\delta\\) format use \\(p=\\Phi(\\frac{\\delta}{\\sqrt{2}\\sigma})\\). Alternatively, interesting uninteresting effect size can also specified directly traditional scale delta delta additional specification standard deviation sd assumed known. shape boundaries (ushape, lshape) either using predefined shapes following Pocock (1977), O'Brien & Fleming (1979) triangular Test (Whitehead, 1997) using options \"pocock\", \"obf\" \"triangular\" respectively, constant (option \"fixed\") supplied function. function passed require exactly one argument specifying number stages return vector length. lower boundary shape required non-decreasing upper boundary shape needs non-increasing. fixed lower boundary used, lfix must smaller \\(\\Phi^{-1}(1-\\alpha)/2\\) ensure smaller upper boundary. default starting point finding sample size nstart=1, default point search stopped (nstop=NULL) 3 times sample size corresponding fixed single-stage design. Computation designs four stages time consuming advised. parameter sample.size controls whether required sample size computed well. Setting FALSE approximately halves compuation time. designs 2 stages, parallelisation computation means packages future future.apply lead decreased computation times choosing parallelisation strategy like, example, multicore (using separate forked R processes, available unix/osx users) multisession (using separate R sessions, available users) (refer future::plan() detail).","code":""},{"path":"/reference/mams.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"object class MAMS containing following components: l Lower boundary. u Upper boundary. n Sample size control stage 1. N Maximum total sample size. K Number experimental treatments. J Number stages trial. alpha Familywise error rate. alpha.star Cumulative familywise error rate spent analysis. power Power least favorable configuration. rMat Matrix allocation ratios. First row corresponds control subsequent rows experimental treatments.","code":""},{"path":[]},{"path":"/reference/mams.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Pocock S.J. (1977), Group sequential methods design analysis clinical trials, Biometrika, 64(2), 191-199. O'Brien P.C., Fleming T.R. (1979), multiple testing procedure clinical trials, Biometrics, 35(3), 549-556. Whitehead J. (1997), Design Analysis Sequential Clinical Trials, Wiley: Chichester, UK.","code":""},{"path":"/reference/mams.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"Thomas Jaki, Dominic Magirr Dominique-Laurent Couturier","code":""},{"path":"/reference/mams.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to design multi-arm multi-stage studies with normal endpoints — mams","text":"","code":"# \\donttest{ ## A fixed sample (single stage) design specified on the p scale mams(K=4, J=1, alpha=0.05, power=0.9, r=1, r0=1, p=0.65, p0=0.55) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 252) #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> 50 #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 1 stage trial with 4 treatments #>  #>                                             Stage 1 #> Cumulative sample size per stage (control):      84 #> Cumulative sample size per stage (active):       84 #>  #> Maximum total sample size:  420  #>  #>              Stage 1 #> Upper bound:    2.16 #> Lower bound:    2.16  ## The same design specified on the delta scale mams(K=4, J=1, alpha=0.05, power=0.9, r=1, r0=1, p=NULL, p0=NULL,      delta=0.545, delta0=0.178, sd=1) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 252) #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> 50 #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 1 stage trial with 4 treatments #>  #>                                             Stage 1 #> Cumulative sample size per stage (control):      84 #> Cumulative sample size per stage (active):       84 #>  #> Maximum total sample size:  420  #>  #>              Stage 1 #> Upper bound:    2.16 #> Lower bound:    2.16  ## An example in Table 1 of Magirr et al (2012) # 2-stage design with O'Brien & Fleming efficacy and zero futility boundary mams(K=4, J=2, alpha=0.05, power=0.9, r=1:2, r0=1:2, p=0.65, p0=0.55,       ushape=\"obf\", lshape=\"fixed\", lfix=0, nstart=40) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 348) #>        #> . #> . #> . #> . #>  #> Design parameters for a 2 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 #> Cumulative sample size per stage (control):      44      88 #> Cumulative sample size per stage (active):       44      88 #>  #> Maximum total sample size:  440  #>  #>              Stage 1 Stage 2 #> Upper bound:   3.068   2.169 #> Lower bound:   0.000   2.169  # Note that these examples may take a few minutes to run  ## 3-stage design with Triangular efficacy and futility boundary mams(K=4, J=3, alpha=0.05, power=0.9, r=1:3, r0=1:3, p=0.65, p0=0.55,       ushape=\"triangular\", lshape=\"triangular\", nstart=30) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 298) #>        #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 3 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 Stage 3 #> Cumulative sample size per stage (control):      36      72     108 #> Cumulative sample size per stage (active):       36      72     108 #>  #> Maximum total sample size:  540  #>  #>              Stage 1 Stage 2 Stage 3 #> Upper bound:   2.706   2.392   2.344 #> Lower bound:   0.000   1.435   2.344  ## Example of a custom boundary function without sample size evaluation mams(K=6, J=3, alpha=0.05, power=0.9, r=1:3, r0=1:3, p=0.7, p0=0.5,       ushape=function(x)return(x:1), lshape=\"fixed\", lfix=0,       sample.size=FALSE) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #> Design parameters for a 3 stage trial with 6 treatments #>  #>              Stage 1 Stage 2 Stage 3 #> Upper bound:   6.834   4.556   2.278 #> Lower bound:   0.000   0.000   2.278  ## Different allocation ratios between control and experimental treatments.  ## Twice as many patients are randomized to control at each stage. mams(K=4, J=2, alpha=0.05, power=0.9, r=1:2, r0=c(2, 4), p=0.65, p0=0.55,       ushape=\"obf\", lshape=\"fixed\", lfix=0, nstart=30) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 271) #>        #> . #> . #> . #> . #> . #>  #> Design parameters for a 2 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 #> Cumulative sample size per stage (control):      70     140 #> Cumulative sample size per stage (active):       35      70 #>  #> Maximum total sample size:  420  #>  #>              Stage 1 Stage 2 #> Upper bound:    3.12   2.206 #> Lower bound:    0.00   2.206  ##  ## example considering different parallelisation strategies  ##    # parallel = FALSE (future framework not used) set.seed(1) system.time( print(mams(K=4, J=3, alpha=0.05, power=0.9, r=1:3, r0=1:3, p=0.65, p0=0.55,       ushape=\"triangular\", lshape=\"triangular\", nstart=30, parallel = FALSE)) ) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 298) #>        #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 3 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 Stage 3 #> Cumulative sample size per stage (control):      36      72     108 #> Cumulative sample size per stage (active):       36      72     108 #>  #> Maximum total sample size:  540  #>  #>              Stage 1 Stage 2 Stage 3 #> Upper bound:   2.706   2.392   2.344 #> Lower bound:   0.000   1.435   2.344 #>    user  system elapsed  #>   50.04    0.28  117.91  # parallel = TRUE (default) with default strategy (sequential computation) plan(sequential) set.seed(1) system.time( print(mams(K=4, J=3, alpha=0.05, power=0.9, r=1:3, r0=1:3, p=0.65, p0=0.55,       ushape=\"triangular\", lshape=\"triangular\", nstart=30)) ) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 298) #>        #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 3 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 Stage 3 #> Cumulative sample size per stage (control):      36      72     108 #> Cumulative sample size per stage (active):       36      72     108 #>  #> Maximum total sample size:  540  #>  #>              Stage 1 Stage 2 Stage 3 #> Upper bound:   2.706   2.392   2.344 #> Lower bound:   0.000   1.435   2.344 #>    user  system elapsed  #>   14.08    0.06   71.95  # parallel = TRUE(default) with multisession strategy (parallel computation) plan(multisession) set.seed(1) system.time( print(mams(K=4, J=3, alpha=0.05, power=0.9, r=1:3, r0=1:3, p=0.65, p0=0.55,       ushape=\"triangular\", lshape=\"triangular\", nstart=30)) ) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 298) #>        #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 3 stage trial with 4 treatments #>  #>                                             Stage 1 Stage 2 Stage 3 #> Cumulative sample size per stage (control):      36      72     108 #> Cumulative sample size per stage (active):       36      72     108 #>  #> Maximum total sample size:  540  #>  #>              Stage 1 Stage 2 Stage 3 #> Upper bound:   2.706   2.392   2.344 #> Lower bound:   0.000   1.435   2.344 #>    user  system elapsed  #>   16.86    0.41   50.73  plan(\"default\")              # }"},{"path":"/reference/MAMS.News.html","id":null,"dir":"Reference","previous_headings":"","what":"Shows changes and news — MAMSNews","title":"Shows changes and news — MAMSNews","text":"Functions showing changes since previous versions.","code":""},{"path":"/reference/MAMS.News.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shows changes and news — MAMSNews","text":"","code":"MAMSNews()"},{"path":"/reference/MAMS.News.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shows changes and news — MAMSNews","text":"Displays changes news given NEWS file package.","code":""},{"path":"/reference/MAMS.News.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shows changes and news — MAMSNews","text":"Screen output.","code":""},{"path":"/reference/MAMS.News.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Shows changes and news — MAMSNews","text":"Thomas Jaki","code":""},{"path":"/reference/MAMS.News.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shows changes and news — MAMSNews","text":"","code":"MAMSNews()"},{"path":"/reference/mams.sim.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulating multi-arm multi-stage designs — mams.sim","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"function simulates multi-arm multi-stage designs estimates power expected sample size.","code":""},{"path":"/reference/mams.sim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"","code":"mams.sim(nsim=10000, nMat=matrix(c(44, 88), nrow=2, ncol=5),          u=c(3.068, 2.169), l=c(0.000, 2.169),          pv=rep(0.5, 4), deltav=NULL, sd=NULL, ptest=1, parallel=TRUE)"},{"path":"/reference/mams.sim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"nsim Number simulations (default=10000). nMat Jx(K+1) dimensional matrix observed/expected sample sizes. Rows correspond stages columns arms. First column control (default: 2x5 matrix 44 subjects per stage arm). u Vector previously used upper boundaries (default=NULL). l Vector previously used upper boundaries (default=NULL). pv Vector size K true treatment effects probability scale. See Details (default=rep(0.5, 4)). deltav Vector size K true treatment effects traditional scale. See Details (default=NULL). sd Standard deviation. See Details (default=NULL). ptest Vector treatment numbers determining power. example, c(1, 2) count rejections one hypotheses testing treatments 1 2 control. parallel TRUE (default), allows parallelisation computation via user-defined strategy specified means function future::plan(). set differently, default strategy sequential, corresponds computation without parallelisation.","code":""},{"path":"/reference/mams.sim.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"function simulates multi-arm multi-stage studies given matrix sample sizes boundaries given vectors u l. effect difference experimental treatment control given pv parameterized \\(P(X_k > X_0 ) = p\\). probability randomly selected person treatment k observing better outcome random person control. pv=rep(0.5,4 experimental treatments control perform equally well (.e. global null hypothesis true). advantage paramterization knowledge variance required. convert traditional effect sizes, \\(\\delta\\) format use \\(p=\\Phi(\\frac{\\delta}{\\sqrt{2}\\sigma})\\). Alternatively, effect size can also specified directly traditional scale deltav additional specification standard deviation sd. function returns probability rejecting hypothesis (typeI), power reject first hypothesis first treatment largest estimated effect, proportion rejections hypothesis specified ptest (prop.rej) well expected sample size.","code":""},{"path":"/reference/mams.sim.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"object class MAMS.sim containing following components:     l Lower boundary. u Upper boundary. n Sample size control stage 1. N Maximum total sample size. K Number experimental treatments. J Number stages trial. rMat Matrix allocation ratios. First row corresponds control second row experimental treatments. nsim Number simulation runs. typeI proportion hypothesis rejected. power proportion first hypothesis rejected corresponding test statistic largest. ptest vector ptest. prop.rej proportion times least one hypothesis specified ptest rejected. exss expected sample size.","code":"res$typeI <- mean(unlist(reps[\"rej\",])) res$power <- mean(unlist(reps[\"pow\",])) res$prop.rej <- rej/nsim res$exss <- mean(unlist(reps[\"ess\",]))"},{"path":[]},{"path":"/reference/mams.sim.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002","code":""},{"path":"/reference/mams.sim.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"Thomas Jaki, Dominic Magirr Dominique-Laurent Couturier","code":""},{"path":"/reference/mams.sim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulating multi-arm multi-stage designs — mams.sim","text":"","code":"# \\donttest{ # Note that some of these examples may take a few minutes to run  # 2-stage design with O'Brien & Fleming efficacy and zero futility boundary with  # equal sample size per arm and stage. Design can be found using # mams(K=4, J=2, alpha=0.05, power=0.9, r=1:2, r0=1:2, ushape=\"obf\", lshape=\"fixed\",  #      lfix=0, p=0.65, p0=0.55)  # under global null hypothesis (using the pv scale) mams.sim(nsim=10000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=rep(0.5, 4), ptest=1) #> Simulated error rates based on 10000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.050 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.012 #> Prop. rejecting hypothesis 1:                        0.014 #> Expected sample size:                              342.606  # under global null hypothesis (using the deltav scale) mams.sim(nsim=10000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=NULL, deltav=rep(0, 4), sd=1, ptest=1) #> Simulated error rates based on 10000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.052 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.014 #> Prop. rejecting hypothesis 1:                        0.017 #> Expected sample size:                              342.060  # under LFC mams.sim(nsim=10000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=c(0.65, 0.55, 0.55, 0.55), ptest=1:2) #> Simulated error rates based on 10000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.931 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.909 #> Prop. rejecting hypotheses 1 or 2:                   0.926 #> Expected sample size:                              347.534  # when all treatments doing similarly well mams.sim(nsim=10000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=c(0.63, 0.62, 0.60, 0.61), ptest=4) #> Simulated error rates based on 10000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.942 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.396 #> Prop. rejecting hypothesis 4:                        0.504 #> Expected sample size:                              361.033  ##  ## example considering different parallelisation strategies  ##   # parallel = FALSE (future framework not used) set.seed(1) system.time( print(mams.sim(nsim=25000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=c(0.65, 0.55, 0.55, 0.55), ptest=1:2, parallel=FALSE)) ) #> Simulated error rates based on 25000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.927 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.905 #> Prop. rejecting hypotheses 1 or 2:                   0.921 #> Expected sample size:                              346.540 #>    user  system elapsed  #>    1.18    0.00    2.56  # parallel = TRUE (default) with default strategy (sequential computation) plan(sequential) set.seed(1) system.time( print(mams.sim(nsim=25000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=c(0.65, 0.55, 0.55, 0.55), ptest=1:2)) ) #> Simulated error rates based on 25000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.927 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.905 #> Prop. rejecting hypotheses 1 or 2:                   0.921 #> Expected sample size:                              346.540 #>    user  system elapsed  #>    0.83    0.05    2.33  # parallel = TRUE (default) with multisession strategy (parallel computation) plan(multisession) set.seed(1) system.time( print(mams.sim(nsim=25000, nMat=matrix(c(44, 88), nrow=2, ncol=5), u=c(3.068, 2.169),          l=c(0.000, 2.169), pv=c(0.65, 0.55, 0.55, 0.55), ptest=1:2)) ) #> Simulated error rates based on 25000 simulations #>  #>                                                            #> Prop. rejecting at least 1 hypothesis:               0.927 #> Prop. rejecting first hypothesis (Z_1>Z_2,...,Z_K)   0.905 #> Prop. rejecting hypotheses 1 or 2:                   0.921 #> Expected sample size:                              346.540 #>    user  system elapsed  #>    1.40    0.02    4.17  plan(\"default\")         # }"},{"path":"/reference/new.bounds.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to update boundaries based on observed sample sizes — new.bounds","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"function determines updated boundaries multi-arm multi-stage study based observed number observations per arm.","code":""},{"path":"/reference/new.bounds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"","code":"new.bounds(K=3, J=2, alpha=0.05, nMat=matrix(c(10, 20), nrow=2, ncol=4),             u=NULL, l=NULL, ushape=\"obf\", lshape=\"fixed\", ufix=NULL,            lfix=0, N=20, parallel=TRUE, print=TRUE)"},{"path":"/reference/new.bounds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"K Number experimental treatments (default=3). J Number stages (default=2). alpha One-sided familywise error rate (default=0.05). nMat Jx(K+1) dimensional matrix observed/expected sample sizes. Rows correspond stages columns arms. First column control (default: 2x4 matrix 10 subjects per stage arm). u Vector previously used upper boundaries (default=NULL). l Vector previously used upper boundaries (default=NULL). ushape Shape upper boundary. Either function specifying shape one \"pocock\", \"obf\" (default), \"triangular\" \"fixed\". See details. lshape Shape lower boundary. Either function specifying shape one \"pocock\", \"obf\", \"triangular\" \"fixed\" (default). See details. ufix Fixed upper boundary (default=NULL). used shape=\"fixed\". lfix Fixed lower boundary (default=0). used shape=\"fixed\". N Number quadrature points per dimension outer integral (default=20). parallel TRUE (default), allows parallelisation computation via user-defined strategy specified means function future::plan(). set differently, default strategy sequential, corresponds computation without parallelisation. print TRUE (default), indicate stage computation .","code":""},{"path":"/reference/new.bounds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"function finds boundaries given matrix sample sizes multi-arm multi-stage study K active treatments plus control. vectors u l boundaries used far u.shape l.shape specify shape boundaries remaining analysis. specifying u l NULL, design using shapes given ushape lshape can found sample sizes per stage arm. shape boundaries (ushape, lshape) either using predefined shapes following Pocock (1977), O'Brien & Fleming (1979) triangular Test (Whitehead, 1997) using options \"pocock\", \"obf\" \"triangular\" respectively, constant (option \"fixed\") supplied function. function passed require exactly one argument specifying number stages return vector length. lower boundary shape required non-decreasing upper boundary shape needs non-increasing. fixed lower boundary used, lfix must smaller \\(\\Phi^{-1}(1-\\alpha)/2\\) ensure smaller upper boundary.","code":""},{"path":"/reference/new.bounds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"object class MAMS containing following components: l Lower boundary. u Upper boundary. n Sample size control stage 1. N Maximum total sample size. K Number experimental treatments. J Number stages trial. alpha Familywise error rate. power Power least favorable configuration. rMat Matrix allocation ratios. First row corresponds control second row experimental treatments.","code":""},{"path":[]},{"path":"/reference/new.bounds.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Magirr D., Stallard N. Jaki T. (2014), Flexible sequential designs multi-arm clinical trials, Statistics Medicine, 33(19), 3269-3279. Link: doi:10.1002/sim.6183 Pocock S.J. (1977), Group sequential methods design analysis clinical trials, Biometrika, 64(2), 191-199. O'Brien P.C., Fleming T.R. (1979), multiple testing procedure clinical trials, Biometrics, 35(3), 549-556. Whitehead J. (1997), Design Analysis Sequential Clinical Trials, Wiley: Chichester, UK.","code":""},{"path":"/reference/new.bounds.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"Thomas Jaki, Dominic Magirr Dominique-Laurent Couturier","code":""},{"path":"/reference/new.bounds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to update boundaries based on observed sample sizes — new.bounds","text":"","code":"# \\donttest{ # Note that some of these examples may take a few minutes to run  # 2-stage design with O'Brien & Fleming efficacy and zero futility boundary with  # equal sample size per arm and stage. Results are equivalent to using  # mams(K=4, J=2, alpha=0.05, power=0.9, r=1:2, r0=1:2, ushape=\"obf\", lshape=\"fixed\",  #      lfix=0, sample.size=FALSE)  new.bounds(K=4, J=2, alpha=0.05, nMat=matrix(c(10, 20), nrow=2, ncol=5), u=NULL, l=NULL,             ushape=\"obf\", lshape=\"fixed\", lfix=0) #>    i) find new lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #> Design parameters for a 2 stage trial with 4 treatments #>  #>              Stage 1 Stage 2 #> Upper bound:   3.068   2.169 #> Lower bound:   0.000   2.169  # A 2-stage design that was designed to use an O'Brien & Fleming efficacy and  # zero futility boundary with equal sample size per arm and stage (n=14). # The observed sample size after stage one are 10, 10, 18, 10, 13 for each arm  # while the original upper bounds used are (3.068, 2.169) for stage 1.  # The updated bounds are (3.068, 2.167).  new.bounds(K=4, J=2, alpha=0.05,             nMat=matrix(c(10, 28, 10, 28, 18, 28, 10, 28, 13, 28), nrow=2, ncol=5),             u=3.068, l=0, ushape=\"obf\", lshape=\"fixed\", lfix=0) #>    i) find new lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #> Design parameters for a 2 stage trial with 4 treatments #>  #>              Stage 1 Stage 2 #> Upper bound:   3.068   2.167 #> Lower bound:   0.000   2.167             # same using parallelisation via separate R sessions running in the background future::plan(multisession) new.bounds(K=4, J=2, alpha=0.05,             nMat=matrix(c(10, 28, 10, 28, 18, 28, 10, 28, 13, 28), nrow=2, ncol=5),             u=3.068, l=0, ushape=\"obf\", lshape=\"fixed\", lfix=0) #>    i) find new lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #> Design parameters for a 2 stage trial with 4 treatments #>  #>              Stage 1 Stage 2 #> Upper bound:   3.068   2.167 #> Lower bound:   0.000   2.167 future::plan(\"default\")             # }"},{"path":"/reference/ordinal.mams.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"function determines (approximately) boundaries multi-arm multi-stage study ordinal binary endpoints given boundary shape finds required number subjects.","code":""},{"path":"/reference/ordinal.mams.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"","code":"ordinal.mams(prob=c(0.35, 0.4, 0.25), or=2, or0=1.2, K=4, J=2, alpha=0.05,      power=0.9, r=1:2, r0=1:2, ushape=\"obf\", lshape=\"fixed\", ufix=NULL,      lfix=0, nstart=1, nstop=NULL, sample.size=TRUE, N=20,       parallel=TRUE, print=TRUE)"},{"path":"/reference/ordinal.mams.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"prob Vector expected probabilities falling category control conditions. elements must sum one (default=c(0.35, 0.4, 0.25)). Interesting treatment effect scale odds ratios (default=2). or0 Uninteresting treatment effect scale odds ratios (default=1.2). K Number experimental treatments (default=4). J Number stages (default=2). alpha One-sided familywise error rate (default=0.05). power Desired power (default=0.9). r Vector allocation ratios (default=1:2). r0 Vector ratio control (default=1:2). ushape Shape upper boundary. Either function specifying shape one \"pocock\", \"obf\" (default), \"triangular\" \"fixed\". lshape Shape lower boundary. Either function specifying shape one \"pocock\", \"obf\", \"triangular\" \"fixed\" (default). ufix Fixed upper boundary (default=NULL). used shape=\"fixed\". lfix Fixed lower boundary (default=0). used shape=\"fixed\". nstart Starting point finding sample size (default=1). nstop Stopping point finding sample size (default=NULL). sample.size Logical sample size found well (default=TRUE). N Number quadrature points per dimension outer integral (default=20). parallel TRUE (default), allows parallelisation computation via user-defined strategy specified means function future::plan(). set differently, default strategy sequential, corresponds computation without parallelisation. print TRUE (default), indicate stage computation .","code":""},{"path":"/reference/ordinal.mams.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"function finds (approximate) boundaries sample size multi-arm multi-stage study ordinal binary endpoints K active treatments plus control promising treatments continued interim analyses described Magirr et al (2012). wrapper around basic mams function facilitate use ordinal binary endpoints, following ideas Whitehead & Jaki (2009) Jaki & Magirr (2013). binary endpoint vector prob two elements (success/failure, yes/, etc.). See mams details basic methodology.","code":""},{"path":"/reference/ordinal.mams.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"object class MAMS containing following components: l Lower boundary. u Upper boundary. n Sample size control stage 1. N Maximum total sample size. K Number experimental treatments. J Number stages trial. alpha Familywise error rate. alpha.star Cumulative familywise error rate spent analysis. power Power least favorable configuration. rMat Matrix allocation ratios. First row corresponds control subsequent rows experimental treatments.","code":""},{"path":[]},{"path":"/reference/ordinal.mams.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Magirr D., Stallard N. Jaki T. (2014), Flexible sequential designs multi-arm clinical trials, Statistics Medicine, 33(19), 3269-3279. Link: doi:10.1002/sim.6183 Pocock S.J. (1977), Group sequential methods design analysis clinical trials, Biometrika, 64(2), 191-199. O'Brien P.C., Fleming T.R. (1979), multiple testing procedure clinical trials, Biometrics, 35(3), 549-556. Whitehead J. (1997), Design Analysis Sequential Clinical Trials, Wiley: Chichester, UK.","code":""},{"path":"/reference/ordinal.mams.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"Philip Pallmann","code":""},{"path":"/reference/ordinal.mams.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to design multi-arm multi-stage studies with ordinal or binary endpoints — ordinal.mams","text":"","code":"# \\donttest{ ## An example based on the example in Whitehead & Jaki (2009) # 2-stage design with triangular efficacy and futility boundaries prob <- c(0.075, 0.182, 0.319, 0.243, 0.015, 0.166) ordinal.mams(prob=prob, or=3.06, or0=1.32, K=3, J=2, alpha=0.05,                  power=0.9, r=1:2, r0=1:2, ushape=\"triangular\",                  lshape=\"triangular\") #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 201) #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                             Stage 1 Stage 2 #> Cumulative sample size per stage (control):      34      68 #> Cumulative sample size per stage (active):       34      68 #>  #> Maximum total sample size:  272  #>  #>              Stage 1 Stage 2 #> Upper bound:   2.330   2.197 #> Lower bound:   0.777   2.197 # same example with parallelisation via separate R sessions running in the background future::plan(multisession) ordinal.mams(prob=prob, or=3.06, or0=1.32, K=3, J=2, alpha=0.05,                  power=0.9, r=1:2, r0=1:2, ushape=\"triangular\",                  lshape=\"triangular\", parallel=TRUE) #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 201) #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                             Stage 1 Stage 2 #> Cumulative sample size per stage (control):      34      68 #> Cumulative sample size per stage (active):       34      68 #>  #> Maximum total sample size:  272  #>  #>              Stage 1 Stage 2 #> Upper bound:   2.330   2.197 #> Lower bound:   0.777   2.197 future::plan(\"default\") # }"},{"path":"/reference/stepdown.mams.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"function determines stopping boundaries intersection hypothesis tests multi-arm multi-stage study, given amount alpha (familywise error rate) spent analysis.","code":""},{"path":"/reference/stepdown.mams.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"","code":"stepdown.mams(nMat=matrix(c(10, 20), nrow=2, ncol=4),               alpha.star=c(0.01, 0.025), lb=0,               selection=\"all.promising\")"},{"path":"/reference/stepdown.mams.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"nMat Matrix containing cumulative sample sizes treatment arm (columns: control, trt 1, ..., trt K), analysis (rows). number analyses must either 2 3 (default=matrix(c(10, 20), nrow=2, ncol=4)). alpha.star Cumulative familywise error rate spent analysis (default=c(0.01, 0.025)). lb Fixed lower boundary (default=0). selection treatments selected next stage? Using default \".promising\" method, treatments test statistic exceeding lower boundary taken forward next stage. \"select.best\", treatment largest statistic may selected future stages. (default=\".promising\").","code":""},{"path":"/reference/stepdown.mams.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"function implements methods described Magirr et al (2014) find individual boundaries intersection hypotheses.","code":""},{"path":"/reference/stepdown.mams.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"object class MAMS.stepdown containing following components: l Lower boundaries. u Upper boundaries. nMat Cumulative sample sizes treatment arm. K Number experimental treatments. J Number stages trial. alpha.star Cumulative familywise error rate spent analysis. selection Pre-specified method treatment selection. zscores list containing observed test statistics analyses far (design stage NULL). selected.trts list containing treatments selected stage.","code":""},{"path":[]},{"path":"/reference/stepdown.mams.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Magirr D., Stallard N. Jaki T. (2014), Flexible sequential designs multi-arm clinical trials, Statistics Medicine, 33(19), 3269-3279. Link: doi:10.1002/sim.6183 Stallard N. Todd S. (2003), Sequential designs phase III clinical trials incorporating treatment selection, Statistics Medicine, 22(5), 689-703.","code":""},{"path":"/reference/stepdown.mams.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"Dominic Magirr","code":""},{"path":"/reference/stepdown.mams.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to find stopping boundaries for a 2- or 3-stage (step-down) multiple-comparisons-with-control test. — stepdown.mams","text":"","code":"# \\donttest{ # Note that some of these examples may take a few minutes to run  # 2-stage 3-treatments versus control design, all promising treatments are selected: stepdown.mams(nMat=matrix(c(10, 20), nrow=2, ncol=4),                alpha.star=c(0.01, 0.05), lb=0,                selection=\"all.promising\") #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                     10      20 #> Cumulative sample size per stage (treatment  1 ):      10      20 #> Cumulative sample size per stage (treatment  2 ):      10      20 #> Cumulative sample size per stage (treatment  3 ):      10      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.95 #> Lower boundary       0.00    1.95 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.68    2.10 #> Lower boundary       0.00    2.10  # select the best treatment after the first stage: stepdown.mams(nMat=matrix(c(10, 20), nrow=2, ncol=4),                alpha.star=c(0.01, 0.05), lb=0,                selection=\"select.best\") #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                     10      20 #> Cumulative sample size per stage (treatment  1 ):      10      20 #> Cumulative sample size per stage (treatment  2 ):      10      20 #> Cumulative sample size per stage (treatment  3 ):      10      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.90 #> Lower boundary       0.00    1.90 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.33    1.67 #> Lower boundary       0.00    1.67 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.90 #> Lower boundary       0.00    1.90 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.56    1.90 #> Lower boundary       0.00    1.90 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.01    0.05 #> Upper boundary       2.68    2.02 #> Lower boundary       0.00    2.02  # 3 stages and unequal randomization: stepdown.mams(nMat=matrix(c(20, 40, 60, rep(c(10, 20, 30), 3)), nrow=3, ncol=4),                alpha.star=c(0.01, 0.025, 0.05), lb=c(0, 0.75),                selection=\"all.promising\") #> Design parameters for a 3 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 Stage 3 #> Cumulative sample size  (control):                     20      40      60 #> Cumulative sample size per stage (treatment  1 ):      10      20      30 #> Cumulative sample size per stage (treatment  2 ):      10      20      30 #> Cumulative sample size per stage (treatment  3 ):      10      20      30 #>  #> Maximum total sample size:  150  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.33   2.070    1.70 #> Lower boundary       0.00   0.750    1.70 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.33   2.070    1.70 #> Lower boundary       0.00   0.750    1.70 #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.57   2.340    2.03 #> Lower boundary       0.00   0.750    2.03 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.33   2.070    1.70 #> Lower boundary       0.00   0.750    1.70 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.57   2.340    2.03 #> Lower boundary       0.00   0.750    2.03 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.57   2.340    2.03 #> Lower boundary       0.00   0.750    2.03 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1 Stage 2 Stage 3 #> Conditional error    0.01   0.025    0.05 #> Upper boundary       2.70   2.490    2.20 #> Lower boundary       0.00   0.750    2.20 # }"},{"path":"/reference/stepdown.update.html","id":null,"dir":"Reference","previous_headings":"","what":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"Function update planned multi-arm multi-stage design account unplanned adaptations.","code":""},{"path":"/reference/stepdown.update.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"","code":"stepdown.update(current.mams=stepdown.mams(), nobs=NULL,                  zscores=NULL, selected.trts=NULL, nfuture=NULL)"},{"path":"/reference/stepdown.update.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"current.mams planned step-MAMS design prior current interim analysis (=defaultstepdown.mams()). nobs Cumulative sample sizes observed treatment arm including current interim analysis. zscores Observed vector test statistics current interim analysis. selected.trts set experimental treatments taken forward next stage testing. argument omitted final analysis. nfuture matrix future cumulative sample sizes. number rows must equal originally planned number stages (2 3) minus number stages already observed. number columns must equal number treatment arms (default=NULL).","code":""},{"path":"/reference/stepdown.update.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"function implements ideas described Magirr et al. (2014) update design according unplanned design modifications. takes input planned multi-arm multi-stage design prior interim analysis, together actually observed cumulative sample sizes test statistics. Treatments included future stages, well future sample sizes, can chosen without following pre-specified rules. output new multi-arm multi-stage design remaining stages familywise error remains controlled pre-specified level.","code":""},{"path":"/reference/stepdown.update.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"object class MAMS.stepdown containing following components: l Lower boundaries. u Upper boundaries. sample.sizes Cumulative sample sizes treatment arm. K Number experimental treatments. J Number stages trial. alpha.star Cumulative familywise error rate spent analysis, conditional results far. selection Pre-specified method treatment selection. zscores list containing observed test statistics analyses far (design stage NULL). selected.trts list containing treatments selected stage.","code":""},{"path":[]},{"path":"/reference/stepdown.update.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Magirr D., Stallard N. Jaki T. (2014), Flexible sequential designs multi-arm clinical trials, Statistics Medicine, 33(19), 3269-3279. Link: doi:10.1002/sim.6183 Stallard N. Todd S. (2003), Sequential designs phase III clinical trials incorporating treatment selection, Statistics Medicine, 22(5), 689-703.","code":""},{"path":"/reference/stepdown.update.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"Dominic Magirr","code":""},{"path":"/reference/stepdown.update.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Update the stopping boundaries of multi-arm multi-stage study at an interim analysis, allowing for unplanned treatment selection and/or sample-size reassessment. — stepdown.update","text":"","code":"# \\donttest{ # 2-stage 3-treatments versus control design # all promising treatments are selected: orig_mams <- stepdown.mams(nMat=matrix(c(10, 20), nrow=2, ncol=4),                             alpha.star=c(0.01, 0.05), lb=0,                             selection=\"all.promising\")  # make adjustment for the observed sample sizes  # not being exactly as planned: stepdown.update(orig_mams, nobs=c(9, 8, 13, 11), zscores=c(1.1, -0.5, 0.2),                  selected.trts=1:3, nfuture=NULL) #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                      9      20 #> Cumulative sample size per stage (treatment  1 ):       8      20 #> Cumulative sample size per stage (treatment  2 ):      13      20 #> Cumulative sample size per stage (treatment  3 ):      11      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.09721452 #> Upper boundary       2.33 1.67000000 #> Lower boundary       0.00 1.67000000 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.00       0 #> Upper boundary       2.33     Inf #> Lower boundary       0.00     Inf #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.04784817 #> Upper boundary       2.56 1.95000000 #> Lower boundary       0.00 1.95000000 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.01530737 #> Upper boundary       2.33 1.67000000 #> Lower boundary       0.00 1.67000000 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1   Stage 2 #> Conditional error    0.00 0.0509194 #> Upper boundary       2.56 1.9500000 #> Lower boundary       0.00 1.9500000 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1     Stage 2 #> Conditional error    0.00 0.005386518 #> Upper boundary       2.55 1.950000000 #> Lower boundary       0.00 1.950000000 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.03294475 #> Upper boundary       2.68 2.10000000 #> Lower boundary       0.00 2.10000000  # make adjustment for the observed sample sizes  # not being exactly as planned. In addition, drop treatment 2: stepdown.update(orig_mams, nobs=c(9, 8, 13, 11), zscores=c(1.1, -0.5, 0.2),                  selected.trts=c(1, 3), nfuture=NULL) #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                      9      20 #> Cumulative sample size per stage (treatment  1 ):       8      20 #> Cumulative sample size per stage (treatment  2 ):      13      20 #> Cumulative sample size per stage (treatment  3 ):      11      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.09721452 #> Upper boundary       2.33 1.67000000 #> Lower boundary       0.00 1.67000000 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.00       0 #> Upper boundary       2.33     Inf #> Lower boundary       0.00     Inf #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.04784817 #> Upper boundary       2.56 1.95000000 #> Lower boundary       0.00 1.95000000 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.01530737 #> Upper boundary       2.33 1.67000000 #> Lower boundary       0.00 1.67000000 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1   Stage 2 #> Conditional error    0.00 0.0509194 #> Upper boundary       2.56 1.9500000 #> Lower boundary       0.00 1.9500000 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1     Stage 2 #> Conditional error    0.00 0.005386518 #> Upper boundary       2.55 1.940000000 #> Lower boundary       0.00 1.940000000 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1   Stage 2 #> Conditional error    0.00 0.0329459 #> Upper boundary       2.68 2.1000000 #> Lower boundary       0.00 2.1000000  # make adjustment for the observed sample sizes not being  # exactly as planned. In addition, drop treatment 2. In addition,  # double the planed cumulative second stage sample sizes: updated_mams <- stepdown.update(orig_mams, nobs=c(9, 8, 13, 11),                                   zscores=c(1.1, -0.5, 0.2), selected.trts=c(1, 3),                                   nfuture=matrix(c(40, 40, 13, 40), nrow=1, ncol=4))  # Account for the observed second stage sample sizes: stepdown.update(updated_mams, nobs=c(38, 41, 13, 36), zscores=c(1.9, -Inf, 1.2),                  selected.trts=NULL) #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                      9      38 #> Cumulative sample size per stage (treatment  1 ):       8      41 #> Cumulative sample size per stage (treatment  2 ):      13      13 #> Cumulative sample size per stage (treatment  3 ):      11      36 #>  #> Maximum total sample size:  128  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.09721452 #> Upper boundary       2.33 1.64000000 #> Lower boundary       0.00 1.64000000 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.00       0 #> Upper boundary       2.33     Inf #> Lower boundary       0.00     Inf #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.04784817 #> Upper boundary       2.56 1.96000000 #> Lower boundary       0.00 1.96000000 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.01530737 #> Upper boundary       2.33 1.97000000 #> Lower boundary       0.00 1.97000000 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1   Stage 2 #> Conditional error    0.00 0.0509194 #> Upper boundary       2.56 2.0200000 #> Lower boundary       0.00 2.0200000 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1     Stage 2 #> Conditional error    0.00 0.005386518 #> Upper boundary       2.55 2.310000000 #> Lower boundary       0.00 2.310000000 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1   Stage 2 #> Conditional error    0.00 0.0329481 #> Upper boundary       2.68 2.1900000 #> Lower boundary       0.00 2.1900000  # 'select.best' design. Account for actually observed sample sizes  # in first stage, and drop treatment 2: orig_mams <- stepdown.mams(nMat=matrix(c(10, 20), nrow=2, ncol=4),                             alpha.star=c(0.01, 0.05), lb=0, selection=\"select.best\")  stepdown.update(orig_mams, nobs=c(9, 8, 13, 11), zscores=c(1.1, -0.5, 0.2),                  selected.trts=c(1, 3), nfuture=NULL) #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                   Stage 1 Stage 2 #> Cumulative sample size  (control):                      9      20 #> Cumulative sample size per stage (treatment  1 ):       8      20 #> Cumulative sample size per stage (treatment  2 ):      13      20 #> Cumulative sample size per stage (treatment  3 ):      11      20 #>  #> Maximum total sample size:  80  #>  #>  #> Intersection hypothesis H_{ 1 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.09721452 #> Upper boundary       2.33 1.67000000 #> Lower boundary       0.00 1.67000000 #>  #> Intersection hypothesis H_{ 2 }:  #>  #>                   Stage 1 Stage 2 #> Conditional error    0.00       0 #> Upper boundary       2.33     Inf #> Lower boundary       0.00     Inf #>  #> Intersection hypothesis H_{ 1 2 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.05471703 #> Upper boundary       2.56 1.90000000 #> Lower boundary       0.00 1.90000000 #>  #> Intersection hypothesis H_{ 3 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.01530737 #> Upper boundary       2.33 1.67000000 #> Lower boundary       0.00 1.67000000 #>  #> Intersection hypothesis H_{ 1 3 }:  #>  #>                   Stage 1    Stage 2 #> Conditional error    0.00 0.05471703 #> Upper boundary       2.56 1.92000000 #> Lower boundary       0.00 1.92000000 #>  #> Intersection hypothesis H_{ 2 3 }:  #>  #>                   Stage 1     Stage 2 #> Conditional error    0.00 0.006198615 #> Upper boundary       2.55 1.910000000 #> Lower boundary       0.00 1.910000000 #>  #> Intersection hypothesis H_{ 1 2 3 }:  #>  #>                   Stage 1   Stage 2 #> Conditional error    0.00 0.0381898 #> Upper boundary       2.68 2.0500000 #> Lower boundary       0.00 2.0500000 # }"},{"path":"/reference/tite.mams.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"function determines (approximately) boundaries multi-arm multi-stage study time--event endpoints given boundary shape finds required number events.","code":""},{"path":"/reference/tite.mams.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"","code":"tite.mams(hr=1.5, hr0=1.1, K=4, J=2, alpha=0.05, power=0.9,            r=1:2, r0=1:2, ushape=\"obf\", lshape=\"fixed\", ufix=NULL,            lfix=0, nstart=1, nstop=NULL, sample.size=TRUE, N=20,            parallel=TRUE, print=TRUE)"},{"path":"/reference/tite.mams.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"hr Interesting treatment effect scale hazard ratios (default=2). hr0 Uninteresting treatment effect scale hazard ratios (default=1.2). K Number experimental treatments (default=4). J Number stages (default=2). alpha One-sided familywise error rate (default=0.05). power Desired power (default=0.9). r Vector allocation ratios (default=1:2). r0 Vector ratio control (default=1:2). ushape Shape upper boundary. Either function specifying shape one \"pocock\", \"obf\" (default), \"triangular\" \"fixed\". lshape Shape lower boundary. Either function specifying shape one \"pocock\", \"obf\", \"triangular\" \"fixed\" (default). ufix Fixed upper boundary (default=NULL). used shape=\"fixed\". lfix Fixed lower boundary (default=0). used shape=\"fixed\". nstart Starting point finding sample size (default=1). nstop Stopping point finding sample size (default=NULL). sample.size Logical sample size found well (default=TRUE). N Number quadrature points per dimension outer integral (default=20). parallel TRUE (default), allows parallelisation computation via user-defined strategy specified means function future::plan(). set differently, default strategy sequential, corresponds computation without parallelisation. print TRUE (default), indicate stage computation .","code":""},{"path":"/reference/tite.mams.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"function finds (approximate) boundaries sample size multi-arm multi-stage study time--event endpoints K active treatments plus control promising treatments continued interim analyses described Magirr et al (2012). wrapper around basic mams function facilitate use time--event endpoints, following ideas Jaki & Magirr (2013). Note sample size calculated required number events, total sample size can estimated (e.g., Whitehead 2001). See ?mams details basic methodology.","code":""},{"path":"/reference/tite.mams.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"object class MAMS containing following components: l Lower boundary. u Upper boundary. n Sample size control stage 1. N Maximum total sample size. K Number experimental treatments. J Number stages trial. alpha Familywise error rate. alpha.star Cumulative familywise error rate spent analysis. power Power least favorable configuration. rMat Matrix allocation ratios. First row corresponds control subsequent rows experimental treatments.","code":""},{"path":[]},{"path":"/reference/tite.mams.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"Jaki T. Magirr D. (2013), Considerations covariates endpoints multi-arm multi-stage clinical trials selecting promising treatments,  Statistics Medicine, 32(7), 1150-1163. Link: doi:10.1002/sim.5669 Jaki T., Pallmann P. Magirr D. (2019), R Package MAMS Designing Multi-Arm Multi-Stage Clinical Trials, Journal Statistical Software, 88(4), 1-25. Link: doi:10.18637/jss.v088.i04 Magirr D., Jaki T. Whitehead J. (2012), generalized Dunnett test multi-arm multi-stage clinical studies treatment selection, Biometrika, 99(2), 494-501. Link: doi:10.1093/biomet/ass002 Whitehead J. (2001), Predicting duration sequential survival studies, Drug Information Journal, 35(4), 1387-1400.","code":""},{"path":"/reference/tite.mams.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"Philip Pallmann, Dominic Magirr","code":""},{"path":"/reference/tite.mams.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to design multi-arm multi-stage studies with time-to-event endpoints — tite.mams","text":"","code":"# \\donttest{ ## An example 2-stage design with triangular efficacy and futility boundaries tite.mams(hr=2, hr0=1.5, K=3, J=2, alpha=0.05, power=0.9,           r=1:2, r0=1:2, ushape=\"triangular\", lshape=\"triangular\") #>  #>    i) find lower and upper boundaries #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #>  #>   ii) define alpha star #>  iii) perform sample size calculation #>       (maximum iteration number = 213) #>        #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> . #> 50 #>        #> . #> . #> . #> . #> . #> . #>  #> Design parameters for a 2 stage trial with 3 treatments #>  #>                                                  Stage 1 Stage 2 #> Cumulative number of events per stage (control):      56     112 #> Cumulative number of events per stage (active):       56     112 #>  #> Maximum total number of events:  448  #>  #>              Stage 1 Stage 2 #> Upper bound:   2.330   2.197 #> Lower bound:   0.777   2.197 # }"},{"path":"/news/index.html","id":"version-202","dir":"Changelog","previous_headings":"","what":"Version 2.0.2","title":"Version 2.0.2","text":"NA related C code bug fix related gcc compilers Add documentation better clarity user guidance","code":""},{"path":"/news/index.html","id":"version-201","dir":"Changelog","previous_headings":"","what":"Version 2.0.1","title":"Version 2.0.1","text":"CRAN release: 2023-04-18 Bug fix K=1 mams.sim Add src/init.c file","code":""},{"path":"/news/index.html","id":"version-200","dir":"Changelog","previous_headings":"","what":"Version 2.0.0","title":"Version 2.0.0","text":"CRAN release: 2022-01-14 Parallelisation framework included several functions Recoding parts functions C Inclusion new package help file Update authors","code":""},{"path":"/news/index.html","id":"version-142","dir":"Changelog","previous_headings":"","what":"Version 1.4.2","title":"Version 1.4.2","text":"CRAN release: 2021-06-16 Fixed error tite.mams Update author contact information","code":""},{"path":"/news/index.html","id":"version-141","dir":"Changelog","previous_headings":"","what":"Version 1.4.1","title":"Version 1.4.1","text":"CRAN release: 2020-11-20 Minor bug fix","code":""},{"path":"/news/index.html","id":"version-14","dir":"Changelog","previous_headings":"","what":"Version 1.4","title":"Version 1.4","text":"CRAN release: 2020-11-17 Adjusted code also provide answers K=1 J=1 Fixed error tite.mams added warning show sample size search stopped due maximum reached","code":""},{"path":"/news/index.html","id":"version-13","dir":"Changelog","previous_headings":"","what":"Version 1.3","title":"Version 1.3","text":"CRAN release: 2019-01-25 References updated","code":""},{"path":"/news/index.html","id":"version-12","dir":"Changelog","previous_headings":"","what":"Version 1.2","title":"Version 1.2","text":"CRAN release: 2017-09-14 New function ‘ordinal.mams’ ordinal binary endpoints New function ‘tite.mams’ time--event endpoints Effect sizes can specified traditional probability scale Search sample size capped maximum value Harmonised function input names (notably, ‘step_down_mams’ ‘update_mams’ now called ‘stepdown.mams’ ‘stepdown.update’) Corrected minor bugs ‘mams’","code":""},{"path":"/news/index.html","id":"version-11","dir":"Changelog","previous_headings":"","what":"Version 1.1","title":"Version 1.1","text":"Corrected minor bug mams.sim K=1","code":""},{"path":"/news/index.html","id":"version-10","dir":"Changelog","previous_headings":"","what":"Version 1.0","title":"Version 1.0","text":"CRAN release: 2016-07-19 Altered mams function improve consistency different allocation ratios","code":""},{"path":"/news/index.html","id":"version-09","dir":"Changelog","previous_headings":"","what":"Version 0.9","title":"Version 0.9","text":"CRAN release: 2016-06-14 Corrected bug update_mams","code":""},{"path":"/news/index.html","id":"version-08","dir":"Changelog","previous_headings":"","what":"Version 0.8","title":"Version 0.8","text":"CRAN release: 2016-05-17 Removal depreciated code","code":""},{"path":"/news/index.html","id":"version-07","dir":"Changelog","previous_headings":"","what":"Version 0.7","title":"Version 0.7","text":"CRAN release: 2015-11-04 Modified print summary return integer sample sizes Updated mams function deal minor inconsistency J=1","code":""},{"path":"/news/index.html","id":"version-06","dir":"Changelog","previous_headings":"","what":"Version 0.6","title":"Version 0.6","text":"CRAN release: 2015-09-29 Corrected bug new.bounds Corrected bug mams.sim minor bugs plot functions corrected Arguments bty las plot functions added Inconsistencies documentation removed","code":""},{"path":"/news/index.html","id":"version-05","dir":"Changelog","previous_headings":"","what":"Version 0.5","title":"Version 0.5","text":"CRAN release: 2015-06-24 bug function mams.sim corrected","code":""},{"path":"/news/index.html","id":"version-04","dir":"Changelog","previous_headings":"","what":"Version 0.4","title":"Version 0.4","text":"CRAN release: 2015-02-28 bug function mams corrected","code":""},{"path":"/news/index.html","id":"version-03","dir":"Changelog","previous_headings":"","what":"Version 0.3","title":"Version 0.3","text":"CRAN release: 2014-05-07 New function (step_down_mams) calculate stopping boundaries intersection hypothesis tests closed testing procedure. New function (update_mams) update boundaries interim analysis take account unplanned treatment selection /sample size reestimation. Documentation updated","code":""},{"path":"/news/index.html","id":"version-02","dir":"Changelog","previous_headings":"","what":"Version 0.2","title":"Version 0.2","text":"CRAN release: 2012-05-28 New function (mams.sim) simulate mams studies included New function (new.bounds) update boundaries based observed number observations included Citation information updated Output data.frame function mams generalized Additional option supress sample size calculation included function mams Documentation updated","code":""},{"path":"/news/index.html","id":"version-01","dir":"Changelog","previous_headings":"","what":"Version 0.1","title":"Version 0.1","text":"CRAN release: 2012-04-25 Initial release","code":""}]
